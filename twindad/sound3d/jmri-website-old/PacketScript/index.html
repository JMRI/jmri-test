<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<!-- $Id: index.html,v 1.2 2003-11-02 05:26:27 jacobsen Exp $ -->
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="Bob Jacobsen, LBL">
   <meta name="GENERATOR" content="Mozilla/4.75C-CCK-MCD {C-UDP; EBM-APPLE} (Macintosh; U; PPC) [Netscape]">
   <meta name="Content-Type" content="text/html; charset=iso-8859-1">
   <title>JMRI PacketScript</title>
</head>
<body>

<A href="../index.html">
<IMG SRC="../images/logo.gif" ALIGN=RIGHT WIDTH="160" HEIGHT="135" HSPACE="0" VSPACE="0">
</a>

<h1>JMRI PacketScript</h1>

This page discusses using the JMRI libraries to test decoders for NMRA
conformance, using a JMRI application called PacketScript.
This capability is being actively developed, and this 
page will not always be up-to-date.
<P>
See also the 
<A HREF="../Technical/index.html">base page for technical documentation</a>,
and the JMRI
<A HREF="../Technical/Jython.html">Jython interface</a> 
page for more information on scripting.

<h2>Introduction</h2>


<h2>Requirements and Installation</h2>


<h2>Examples</h2>

<PRE>
% ./jmrithon -i packetscript/PacketScript.py
available routines: 
  send([1,2,3])
  sendXOR([1,2,3])
  sendBaseline( 0, "On", "Forward", "emergencystop" )
  
>>> send([1,2,3])

>>> s1 = sensors.provideSensor("12")

>>> s1.knownState
1

>>> if (s1.knownState == ACTIVE):
...     print "OK"
... else :
...     print "Not OK"
... 
Not OK

</PRE>

<h2>Limitations</h2>

<h3>"Raw-mode" sending</h3>
Few command stations can send arbitrary bit-strings 
on their outputs.  The original NMRA program had a
sendRaw() capability that requires this, and is not
yet implemented here.

<h3>Programming packets</h3>
Many command stations have separate programming and main
outputs.  It's not clear how this program should operate
with those.  Currently, the packets are sent to the main
output.

<HR>
<BR>Site hosted by: <BR>
<A href="http://sourceforge.net"> 
<IMG src="http://sourceforge.net/sflogo.php?group_id=26788&type=1" width="88" height="31" border="0" alt="SourceForge Logo"> </A> 

<hr>
Bob Jacobsen<BR>
jake@physics.berkeley.edu

</body>
</html>
