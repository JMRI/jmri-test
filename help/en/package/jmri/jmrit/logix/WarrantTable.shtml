<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<!-- $Id$ -->
<HTML LANG="en">
<HEAD>
<TITLE>JMRI: Panel Editor Help</TITLE>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META CONTENT="Pete Cressman" NAME="Author">
<META NAME="keywords" CONTENT="JMRI help Panel Editor">

<!-- Style -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<LINK REL="stylesheet" TYPE="text/css" HREF="/css/default.css"
	MEDIA="screen">
<LINK REL="stylesheet" TYPE="text/css" HREF="/css/print.css"
	MEDIA="print">
<LINK REL="icon" HREF="/images/jmri.ico" TYPE="image/png">
<LINK REL="home" TITLE="Home" HREF="/">
<!-- /Style -->
</HEAD>

<BODY>
<!--#include virtual="/Header" -->
  <div class="nomenu" id="mBody">
    <div id="mainContent">

<H1>The Warrant List</H1>

The Warrant List is a list of all the recorded warrants.  For an overview 
discussion of warrants, see <A HREF="Warrant.shtml"> Warrants</A>.
<p>
<H2>Columns in the Warrant Table</H3>
<ul>
        <li><b>Warrant</b>: - The name of the warrant.</li> 
        <li><b>Route</b>: - The route of the warrant is listed in a drop down combo box by 
		clicking the table cell</li>
        <li><b>Train Name</b>: - The Train Id, as stated in the Roster.  This cell can be
		edited and its content is displayed by the Indicator Track Icons when the train
		occupies their OBlock. (The edit popup of Indicator Track Icons have a checkbox 
		to enable this function)</li>
        <li><b>DCC Address</b>: - The DCC Address of the locomotive or consist.  This cell can
		be edited to correspond to the current motive power of the train.</li>
		<li><b>Factor</b>: - The ratio to adjust the throttle settings so speed changes
		governed by signal aspects and occupancy ahead begin and end appropriately.</li>
        <li><b>Allocate</b>: - A button that reserves the route for the warrant.  The Indicator
		Track Icons display green to indicate the route.</li>
        <li><b>Deallocate</b>: - A button that removes the reservation for the warrant.</li>
        <li><b>Set</b>: - A button that allocates and sets the turnouts for the warrant route.</li>
        <li><b>AutoRun</b>: - A button that runs the train over the route according to the 
		throttle commands of the warrant. The recorded speed of the train will be modified 
		according to the occupancy and signal aspects encountered on the route.  The 
		Indicator Track Icons display the current position of the
		of the train with a blue color.</li>
        <li><b>ManRun</b>: - A button that allocates the warrant and sets the route for
        a manual operator to run the train.  The script is not run, but the route is displayed.
		of the train with a blue color.
        (The default setting hides this column. To display, right click in the table Header.)</li>
        <li><b>Control/Status</b>: - The status of the warrant is shown.  It also has a 
		drop down combo box that can send commands to a running train. 
		<b><i>Note</b>: This column has two functions - 
		Status messages and control buttons.</i>
		<br>
		When running, the warrant will post a status message here; e.g. its current location
		and speed, error messages, etc.  
		<br>
		When clicked the following commands can be sent:
        <ul>
        	<li><b>Halt</b> - Temporarily halts the train and suspends execution of the 
			throttle command script</li>
		<li><b>Resume</b> - Ramps up the speed of the train to its former setting and 
			restarts the throttle command script
		<li><b>Move into Next Block</b> - Repeats the test for whether a signal aspect has changed or
			an occupied block ahead has cleared.  If the train has overrun a block where it is expected
			to be and now appears to be the obstacle preventing movement, this resets its location.
			(Occasionally a sensor change can be
			missed due to a short or other hardware malfunction.  This reset may allow 
			a stopped train to continue.)
		<li><b>Abort</b> - Abort the script and deallocate the warrant.</li>
	  </ul>
        <li><b>Edit</b>: - A button that opens an editing window for the warrant,</li>
        <li><b>Delete</b>: - A button that deletes the warrant.</li>
</ul></p>
<ul>
        <b>NOTE:</b> Warrants can only be created if the PanelPro configuration 
        has at least two OBlocks defined.
</ul>
<H2>The Warrant List Menus</H2>
The following item are under the <b>Warrants</b> menu.
<ul>
        <li><b>Concatenate Warrants</b>: - Join two warrants together to become
        	a single warrant.  The last block and path of the first warrant must be
        	equal to the first block and path of the second warrant.</li>  
        <li><b>Create New Warrant</b>: - After providing system and user names this
		opens a blank Warrant Editing Window to create a new warrant. The
        	operations of this frame are discussed in <A HREF="CreateEditWarrant.shtml">
        	Creating and Editing Warrants</A>.</li>
	  <li><b>Train Trackers</b>: - Opens window where the identity of trains can be
		displayed as they move from one occupancy block to another.</li>
	  <li><b>Create NXWarrant</b> - Opens a window to create an eNtry/eXit warrant.
	  		this is discussed in <A HREF="NXWarrant.shtml">About NXWarrants</A>.</li>
	  <li><b>Open Session Log</b> - Opens a window to name a file that records the
	  warrant and train tracking status messages.</li>
</ul>
<H2>Other Warrant List Features</H2>
The following items are at the bottom of the window:
<p>
The <b>Create NXWarrant</b> button 0pens a window to create an eNtry/eXit warrant.
<p>
The <b>Halt all Trains</b> button causes all running warrants to halt their trains.
<p>
The <b>Status</b> field contains the last 20 messages from warrants.  Click in the 
field to display them.
<p>
<H2>Running Automated Trains</H2>
The recorded throttle commands can be played back to run the train.  When running 
automated, additional control of the train can done through four choices: <b>Halt</b>,
<b>Resume</b> and <b>Abort</b> are commands to halt a running
automated train, restart it or stop the train and abort the remaining throttle commands.
<b>Move into Next Block</b> is "repair" command should the train overrun a block and
become "Lost".  This command aligns the warrant to the next block and restarts the train.
<p>
Although there are separate operations in the Warrant List table to reserve a warrant route
(Allocate) and
set turnouts and signals (Set Route) these operations do not have to be done to run
an automated train.  A <b>AutoRun</b> operation can begin without them.  The train will
seek allocation and set turnouts as it proceeds on the route.  When
confronted with an occupied block, the train will stop and wait until the block clears.
When the next block is clear but the block beyond the next block is occupied, the
train will approach at reduced speed.  Similarly, if the Portals have been defined with
Signal Heads or Signal Masts protecting the blocks they join, the train will modify the
speed according to the appearance or aspect of the signal. An automated train will 
attempt to secure
allocation of the next two blocks each time it enters a block.  It also checks whether
the block is occupied by an unknown train and will not enter if the block is occupied.
<p>
As a safety feature, whenever a warranted train has permission to enter the 
next block, the turnouts are reset.   Having permission from signals means 
that resetting the turnouts should not interfere with any interlocking logic.  
In the absence of signals, occupancy or allocation to another warrant  
may deny permission.  Only clearing the most restrictive of these conditions 
will give the auto-run train permission to proceed.  When such a denial is 
cleared, the train will proceed automatically.  The only thing that overrides 
having permission to proceed is if the user has set the control to "Halt".  The train will 
not move until the user sets "Resume".
<p>
<H3>When the Starting block is Unoccupied</H3>
If a warrant is started and  the starting block is not occupied, the warrant will
wait until the block is occupied.  When occupation occurs the warrant will set to
the "Halt" and wait for the user to set the "Resume" control.
Note it is vital that the correct train occupies the starting block. The address specified in
the warrant, is the train that will begin moving. 
<p>
<H2>Why There is a Factor Column</H2>
When a warrant is running and its train enters a block, it looks ahead to see if any speed changes
are coming up.  The look ahead distance must be adequate for the train to be able
to stop should that be needed.  This distance is at least one block and could be several.
Without a Throttle Factor a fast 
running engine may overrun the point where a speed change expects to be completed, or 
a slow running train may stop too far short of where it is expected.
<p>
The Throttle Factor reconciles the throttle setting to the scale track speed.  The
most important element in this adjustment is the <b>scale of the layout</b>.  <b><i>The throttle
factor times the scale factor converts layout dimensions to scale dimensions.</b></i>
<ul>
	<b>Note:</b> If signals have not been configured in the Occupancy Block Tables nor
	have block speeds been configured there, the throttle factor will only be used when
	generating the ramp-up and ramp-down throttle commands in NXWarrants or when rouge
	occupancy is detected ahead.  They <b>do not</b> refer to the recorded speed changes.
</ul>
A default throttle factor and the layout scale is configured in <b>Preferences</b>
under the warrants tab.
<p>
Once a speed change is noted by reading a signal aspect or specified block speed ahead, 
the Warrant must calculate when to begin the speed change (ramp down or ramp up).  Both
the look ahead distance and the time when to begin the speed change require knowing the 
track speed.  Thus to get train to begin and end its speed changes at the proper points,
a factor that relates the throttle setting to the actual track speed is needed.  This 
is the value in the <b>Factor column</b>.
<p>
The factor obviously depends upon the particular engine's power curve.  This is a combination
of decoder's throttle speed curve and the response of the locomotive motor to the voltage
set by the speed curve.  For most decoder/motor combinations a relatively constant 
<b>throttle factor</b> can be found for the entire mid and high ranges.  If the entire
locomotive fleet is speed matched, then the same factor will do for all.  
Lacking that, individual 
factors for the motive power used in a warrant can be determined by using the NXWarrant
<b>Calibration</b> feature.  See <A HREF="NXWarrant.shtml"> NXWarrants</A> for
instructions on how to do this.
<ul>
        <b>Note:</b> The calculations
		done by the warrant assume a linear change in throttle settings.  If an 
		extreme speed curve shape is defined for a decoder, the factor will not function well
		over the entire throttle range.
</ul>
<p>
<br>
<!--#include virtual="/Footer" -->
</BODY>
</HTML>
