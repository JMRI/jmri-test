<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
<!-- $Id: BlockBossFrame.shtml,v 1.5 2008-03-09 20:27:30 jacobsen Exp $ -->
<title>JMRI: SSL Documentation</title>

<!-- Style -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<LINK REL="stylesheet" TYPE="text/css" HREF="/css/default.css"
	MEDIA="screen">
<LINK REL="stylesheet" TYPE="text/css" HREF="/css/print.css"
	MEDIA="print">
<LINK REL="icon" HREF="/images/jmri.ico" TYPE="image/png">
<LINK REL="home" TITLE="Home" HREF="/">
<!-- /Style -->
</HEAD>

<BODY>
<!--#include virtual="/Header" -->

<h2> 
JMRI: Simple Signal Logic Documentation
</h2>

<dl>
<dt class="left"><a name="contents"><h3>Contents</h3></a></dt>
<dd class="top">
<p>The documentation below describes Signaling with JMRI, and discusses how to set 
up the basic signal situations. The documentation is divided into sections; click below for 
easy access to a listed section. If you prefer to try before reading much,
read <a href="#intro">Introduction to SSL</a>, 
then click <a href="#start">Getting Started</a>
and follow those instructions. Return here to read about what you did.
</p><ul>
<li><a href="#terms">Basic Vocabulary</a></li>
<li><a href="#intro">Introduction to SSL</a>
</li><li><a href="#SSL">SSL</a>
</li><li><a href="#start">Getting Started</a>
</li></ul>
</dd>

<dt class="left"><a name="terms"><h3>Vocabulary</h3></a></dt>
<dd class="top">
<p><b>Some basic signal terms:</b><br>
<ul>
<li><b>Signal Arm</b> or <b>Signal Head</b> Each individual signal unit.</li>
<li><b>Aspect</b> The speed or route indication given by one or more signal heads or arms.<br>
</li>
<li><b>Marker</b> A signal head or arm that does not change color or position.</li>
<li>
<b>Light</b> The individual lamp in a signal. A light may indicate multiple aspects
if it changes color like  in a searchlight signal, or it may take multiple lights
to indicate a single aspect, for example in position light signals.</li>
<li>
<b>Mast</b> The pole that mounts one or more signal arms that (usually) control each
individual track.</li>
<li><b>Distant Signal</b> The signal you are controlling shows the same or 
more restrictive aspect as the next signal in the direction and route of travel.</li></ul>
	
<p><b>Some JMRI specific SSL and Signal terms:</b><br>
<ul><li><b>Signal Table</b> The list of signals in JMRI. Signals must first be added into 
the Signal Table before they may be included in a SSL entry or Logix.</li>
<li><b>Triple Output</b> 
A signal head that has each aspect of the signal directly driven 
from an individual output (called a turnout) line. 
Each aspect change requires that three commands be sent.</li>
<li>
<b>Double Output</b> 
A signal head that uses just two output lines to indicate 4 signal aspects.
Usually these aspects will be Clear, Approach, Stop, and Dark. 
The output coding is such that 
one turnout thrown (on) controls the stop and the other thrown (on) controls the clear. 
Both outputs thrown (on) controls the
approach, and both closed (off) are dark. 
Each aspect change requires that two commands be sent.</li>
<li>
<b>SE8c</b> A signal head controlled by a single turnout command per aspect change. One turnout command changes between 
stop and clear, and the second turnout command changes between approach and dark.</li>
<li> <b>Virtual</b> Virtual signals are JMRI internal signals with no actual hardware attached. Before the advent of Logix,
Virtual Signals were required to solve more complex operations than can be done with with a single SSL alone.</li>
<li><b>Protected Sensor</b> The next block sensor/s following the signal you are controlling in the 
direction and route of travel. The "protection" is to prevent a train from entering an occupied block without warning.</li>
<li><b>Protected Signal</b> The next signal after the one you are controlling in the 
direction and route of travel. The "protection" is to prevent a train from approaching a stop signal without sufficient warning to allow it to be stopped short of reaching the "protected" signal.</li>
</li>
<li><b>System Name</b> The internal JMRI representation for the actual hardware being used
to control the signal. This will vary depending on your hardware, and must match your system.
</ul>
	<dt class="left"><a name="table"><h3>Signal Table</h3></a></dt>
	<dd class="top">

<A href="./images/SigTable.gif"><IMG SRC="./images/SigTable.gif" ALIGN=RIGHT WIDTH="296" HEIGHT="355" HSPACE="0" VSPACE="0"></A>
All the signals that JMRI knows about can be referenced
using the "Signal Table" tool in the Tools menu of most JMRI programs.
There are five columns in the table:
<UL>
<LI>The <b>system name</b> is assigned to the signal when it's created, 
and can't be changed.
<LI>If you're interested in having your signals carry "human readable"
names, you can click in the <b>User Name</b> column and change that information
to whatever you want.
<LI>As the signal changes, for whatever reason, the current
appearance will show in the <b>State</b> column of the table.  You can also click on the
appearance button to cycle through the avilable appearances:
red, yellow, green, flashing red, flashing yellow, flashing green, and dark. The 
system hardware will follow these changes.

<LI>The check box in the <b>Lit</b> column lets you see whether the
signal head on the layout is lit (checked) or stays dark (unchecked). This may 
also be controlled automatically with the SSL "approach" lighting option or 
from Logix. <i>Note:</i> This only affects the actual layout hardware, not any 
panel indications nor signal state logic.
 <LI>The check box in the <b>Held</b> column shows the "held" property of the
signal, and allows you to change it.  This property may be used by CTC
machine logic or Logix to say "Don't change this signal head from red, even if it 
would be safe to do so, because I want to hold a train here".
</UL>
<A href="./images/SigAdd.gif"><IMG SRC="./images/SigAdd.gif" ALIGN=RIGHT WIDTH="181" HEIGHT="218" HSPACE="0" VSPACE="0" ALT="Simple Signal Logic panel figure"></a>
<P>To define a new signal, click on the <b>Add New Signal</b> button.  It will
prompt you for the signal type (controlled by turnout outputs; SE8c; etc), and
whatever setup information is needed for your choice.
<P> This information is saved with the configuration in an XML file, along
with control panel setup, Logix, Routes, and similar stuff.  For more information
on creating and displaying panels, including how to show signals
on your panels, please see the 
<A HREF="../../../../html/apps/PanelPro/Panels.html">Panels pages</a>
and the pages on the 
<A HREF="../../../../html/apps/PanelPro/Panels-Cornwall/Cornwall.html">Cornwall Railroad control panel</a>.	<dt class="left"><a name="intro"><h3>Introduction to SSL</h3></a></dt>
	<dd class="top">
<p>
SSL is a JMRI tool to enable the rapid setup of basic ABS style signaling. 
	For more complex operations beyond the capability of SSL refer to the section on Logix.
	The SSL user interface is designed to be user friendly to
	all users with basic familiarity with JMRI. SSL provides a means
	for setting up basic signals in an intuitive manner, without the 
	user having to be familiar with all of the logic necessary to account for the different aspects.
	

    <dt class="left"><a name="SSL"><h3>SSL</h3></a></dt>                                                                                          
	<dd class="top">
	<A NAME="logic"><h3>Simple Signal Logic</h3></a>
<A href="./images/SigAdd.gif"><IMG SRC="./images/SSLLogic.gif" ALIGN=RIGHT WIDTH="354" HEIGHT="364" HSPACE="0" VSPACE="0" ALT="Simple Signal Logic panel figure"></a>

Much of basic ABS signaling can be boiled down to "a signal goes red when a train
can't safely enter the block it protects; it goes yellow when the block following 
the protected block can't be entered". Although that's a simplication, it can serve
as a powerful starting point for understanding signaling logic.
<P>

The Simple Signal Logic tool allows you to configure JMRI to 
use this basic ABS type of logic to set the appearance of a signal. 
Using the panel, you enter information on:
<UL>
<li><b>Signal Named</b> The signal being driven.</li><li><b>Protects Sensor/s</b> Which sensors (occupancy detectors) cover the block
immediately past the signal. When any of these sensors show "active" the 
signal will be set to red.</li>
<li><b>Red When Turnout</b> If the block contains a turnout, 
configure the turnout name and use the selection button to choose whether you're entering
the closed or thrown leg. The signal will be set to red
whenever the turnout is set against this track.</li>
<li><b>Protects Signal</b> The next signal that the train will reach;
this signal will be set yellow if the next signal is
red.</li>  
<li><b>With Flashing Yellow</b> If the checkbox is checked, the signal will be set
flashing yellow (JMRI will alternate between dark and yellow) if the
next protected signal is yellow, thereby giving four-block signaling.</li>
<li><b>Limited Speed</b> If the checkbox is checked, this signal will be set
to yellow as the least restrictive aspect.</li>
<li><b>Is Distant Signal</b> If the checkbox is checked, this signal will be set
to the most restrictive aspect of this signal or the next protected signal.</li>
<li><b>Approach Lighting Sensor</b> The sensor that controls the lighting of this signal. Only the
actual hardware signal will go dark. Panel indicators will show the normal signal aspect. 
Leave this entry blank to always show lit.</li>
<li><b>Facing Point Turnout</b> The signal located on the single track line, 
facing a choice of two or more tracks in the direction of travel.</li>
<li><b>Trailing Point Turnout</b> The signals located on the double track line, 
facing a single track in the direction of travel.</li></ul><p>

The case of a facing point turnout which leads to two different "Protected Signals" is also covered although the above figure doesn't show it.

If a single signal head is used to control both branches, then choose "On Facing-Point
Turnout". If a different head will control each route, then simply choose "Main"
or "Diverging" leg of turnout, as required for each one.
<p>Pause your mouse over any entry or item in the SSL creation window for a brief "tooltip" help 
reminder.</p>

<p>It's clear that this won't cover complicated interlockings nor will it 
cover the speed-signaling seen on some prototypes. For those situations use a 
combination of Logix and Routes. Logix cover the conditions, and Routes control the actions
to be taken.</p>
	</dd>
	
	<dt class="left"><a name="start"><h3>Getting Started</h3></a>
	</dt>
	<dd class="top">
	    <p>Follow the following steps to create a signal and become familiar
	    with how the SSL user interface works.
	    </p><ol>
		<li> Select <b>Turnout Table</b> in the <b>Tools</b> menu.
		</li><li> Check to be sure that the output lines (turnouts) that will control your signal are in the table. If not, click the <b>Add</b> button at the bottom of the Turnout Table.
		</li><li> In the Add New Turnout window that appears, enter a system name, (E.g. LT1)
		and "test" for user name, then click <b>OK</b>. <i>Note:</i> System names must start 
		with CT, IT, LT, NT, XT, etc. and be followed by the actual hardware number of the turnout.
		</li> <li> Clicking on the correct <b>Closed/Thrown</b> entries in the Turnout Table should now cause your signal to change.
		</li><li> Next select <b>Signal Table</b> in the <b>Tools</b> menu.
		</li><li> In the Signal Table window that appears, click <b>Add</b> to begin defining a new signal head.
		</li><li> In the Add New Signal window that appears choose the correct signal type to 
		match your hardware. The required item boxes will appear.
		</li><li> Enter a system name. For example LH152. <i>Note:</i> System names must start 
		with CH, IH, LH, NH, XH, etc. and be followed by the number of this head.
		</li><li> Next enter one or more turnout numbers that will control this signal. <i>Note:</i> In the case of
		SE8c style signals just enter the first turnout number of each pair. The second is automatically known. 
		</li><li> Click <b>OK</b> to enter this head into the Signal Table.  
		</li><li> Enter all the signal heads that you will be using for this test.
		<li> Now select <b>Simple Signal Logic</b> in the <b>Tools</b> menu.
		</li>
		<li> Fill in the various entries to match your signals requirements as 
		previously shown in the <a href="#SSL">SSL</a> section.
		</li><li> Click <b>Apply</b> to make this entry active.</li>
		<li> Be sure to save your work.
		</ol>
    	<p>You have just created an SSL entry to control a signal head. It's as 
		simple as that. It took 
    	you more time to read this tutorial than to create the SSL entry.</p>	    
	</dd>
    
<!--#include virtual="/Footer" -->
</body>
</html>