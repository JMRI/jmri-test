<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<!-- $Id: PanelEditor.shtml,v 1.2 2007-11-23 06:45:58 jacobsen Exp $ -->
<HTML LANG="en">
<HEAD>
<TITLE>JMRI: Panel Editor Help</TITLE>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META CONTENT="Bob Jacobsen" NAME="Author">
<META NAME="keywords" CONTENT="JMRI help Panel Editor">

<!-- Style -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<LINK REL="stylesheet" TYPE="text/css" HREF="/css/default.css"
	MEDIA="screen">
<LINK REL="stylesheet" TYPE="text/css" HREF="/css/print.css"
	MEDIA="print">
<LINK REL="icon" HREF="/images/jmri.ico" TYPE="image/png">
<LINK REL="home" TITLE="Home" HREF="/">
<!-- /Style -->
</HEAD>

<BODY>
<!--#include virtual="/Header" -->

<H2>The Panel Editor</H2>

A panel is a set of icons representing various components of a layout.
Some of the icons available in JMRI include turnouts, signals, and
sensors. You can also include a background icon for your panel.

<H3>Creating a panel</H3>
These are made with the Panel Editor, which allows you to place images
to represent turnouts, signals, sensors, trackwork, etc.
<P>If you'd like to see animated clinics that show how each of these
things are actually done on the computer screen, please see <A
	HREF="http://www.rr-cirkits.com/Clinics/Clinics.html">Dick
Bronson's clinics page</A>.</P>
<BR>
<H3>Contents of the Panel Editor</H3>

<P>Starting from the top:</P>
<UL>
	<LI>Two text fields specifying where (in pixels) new components
	will be inserted on the panel. You can generally ignore these, as once
	the components has been inserted you can drag it around by holding the
	meta (Apple, command, etc) key down.</LI>
	<LI>A button to pick a background image. The editor's drawing
	capability is rudimentary and likely to stay that way for a long time.
	To create CTC panels, complex track diagrams, etc, its easier to draw
	them in some other program and insert them as the background image for
	a JMRI control panel.</LI>
	<LI>A button to add a text label. Put the desired text in the
	field and click the button. You can slide the label around after
	inserting it, but you currently can't edit the text later.</LI>
	<LI>A button to add an icon as a label. This is a way to add track
	symbols, etc. To change the icon, click the "Change icon" button to
	activate the Change Icon panel. The current icon is shown at the top.
	To change it, use the tree in the the window to find a new one. The new
	icon will be shown at the bottom of the window. To use the new icon,
	click on the icon at the top of the Change Icon panel to load the
	selected icon. This is a general mechanism: Any icon in an Change Icon
	window can be replaced by selecting the desired new one and clicking on
	the icon to be replaced.</LI>
	<LI>Two sections for adding left- and right-bound turnouts. These
	actually work the same way, only with different icons to represent the
	states of the turnouts. Enter the turnout number (e.g. 23) and click
	"Add turnout:". If you'd prefer a different graphic for the closed and
	thrown states, you can change their icons as described above.</LI>
	<LI>A section for adding a sensor. Type the sensor number (e.g.
	74) in the field and click "Add sensor:".</LI>
	<LI>A section for adding a signal head. You should define your
	signal heads by using the signal head table before attempting to add
	them to your panel. Then type in the signal head number in the field
	and click "Add signal head:".</LI>
</UL>

<H3>Control Checkboxes</H3>

<UL>

	<LI>Panel items popup menu active. When checked a small popup menu
	will appear when you right click an icon. Most icons allow you to
	rotate and remove the icon. There are other options depending on the
	type of icon, for example, you can disable a turnout so it doesn't
	actually control anything.

	<P></P>
	<P>The popup menu may also change if the configuration of an item
	is changed. For example, if you add feedback to a turnout, the popup
	menu includes a new item choice called "Tristate". Tristate allows you
	to use the inconsistent icon, which is one of the four possible icons
	available for a turnout. Normally when you first click on a turnout
	icon it commands the layout to change the state of the turnout. If you
	use feedback for a particular turnout, the icon display will wait to
	hear from the layout before modifying the turnout icon to the closed or
	thrown icon. By using Tristate, the icon will change immediately to the
	inconsistent icon when the turnout is clicked. Inconsistent in this
	case means that I've commanded the turnout to change and now we're
	waiting to hear if it actually happened. If and when the layout returns
	the actual or "known state" of the turnout, the icon will change to
	that state. If you don't use Tristate, when you click on the icon, it
	may take some time (milliseconds to seconds depending on the system)
	before the icon responds with the known state of the turnout.</P>
	</LI>

	<LI>Panel items can be repositioned. When checked you can move
	items in your panel by selecting and dragging them with the meta key.
	For window's users, hold the right click down and drag.</LI>

	<LI>Show item's coordinates in popup menu. When checked, the
	item's popup menu will include the item's X and Y coordinates. This can
	help you better position your icons in the panel.</LI>

	<LI>Panel items control layout. Normally you want to control your
	layout, so leave this box checked. Otherwise, uncheck the box if you
	don't want your panel to send commands to your layout.</LI>

	<LI>Panel has menu. Once you don't need to change or edit your
	layout, you can disable the ability to use the panel editor. The only
	way to re-enable the editor is to edit the panel file. Using a simple
	editor (Notepad for Window users will work) or XML editor, open your
	panel and find panelmenu="no" and change "no" to "yes" and save the
	file. The panel will now show the menu the next time you load the panel
	in PanelPro.</LI>

</UL>

<P>After getting the panel the way you want, you can use the "Store
panels..." entry in the "Panels" menu to write it to an XML file.</P>
<H3>Available Icons</H3>
The JMRI library contains lots of contributed icons for representing CTC
panels, LEDs, etc. You can browse through them using the file tree in
the Change Icon frame.
<P>You can also create your own icons and add them to the
appropriate folders.</P>

<H3>Other types of panels</H3>

Because this is icon-based, you can create panels that look any way you
want. For example, instead of using track-schematic icons for turnouts,
you could use small images of the levels and plates on CTC machine. This
would give you "mechanical" levers you can flip back and forth with a
click.

<P>It's also possible to create a panel where the "track" lines
change color to indicate whether the track is occupied. The procedure
for doing that is described on a <A
	HREF="http://jmri.sourceforge.net/apps/PanelPro/ColorTrack.html">separate
page</A>.</P>
<H3>Manipulating Icons</H3>

To move an icon around on the panel, you "meta-drag" it. On a Mac,
that's "hold the cmd key and drag with the cursor"; on Windows, hold the
"right mouse click and drag".
<P>There's also a pop-up menu (ctrl-click on a Mac, right click on a
PC) that will provide various ways to manipulate the icon. It will let
you rotate the icon so that it points in whatever direction you want.
Text labels can have their font, size and color changed. You can also
remove icons from the panel with the popup menu.</P>

<H2>Communicating with Multiple Systems</H2>

PanelPro can communicate with more than one layout control system. For
example, the Cornwall Railroad uses C/MRI hardware for sensing the
status of blocks and turnouts on the layout, but drives turnout
positions through a Digitrax DCC system.
<P>To configure the program to talk to multiple systems, select them
in the preferences panel. (Edit->Preferences) Check the "Show Advanced
Preferences" and under "Aux layout connection:" enter the system
information for your second connection.</P>
<P>If you add a turnout, sensor or signal to a panel using just a
number, e.g. "23", it will be assigned to the first system on the
preference panel. To access the second system, you have to use JMRI <A
	HREF="../../../../html/doc/Technical/Names.html">system names</A>. For
example, if the second attachment is to a LocoNet system, you'd refer to
a LocoNet Turnout as LT13; a LocoNet sensor as LS21, etc.</P>

<!--#include virtual="/Footer" -->
</BODY>
</HTML>

