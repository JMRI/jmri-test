<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<!-- $Id: Digitrax.shtml,v 1.7 2008-12-28 05:12:09 jacobsen Exp $ -->
<html lang="en">
<head>
  <title>JMRI Hardware Guide: Digitrax DCC </title>
  <!-- Style -->
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <link rel="stylesheet" type="text/css" href="/css/default.css" media="screen">
  <link rel="stylesheet" type="text/css" href="/css/print.css" media="print">
  <link rel="icon" href="/images/jmri.ico" type="image/png">
  <link rel="home" title="Home" href="/">
  <!-- /Style -->
</head>

<body>
<!--#include virtual="/Header" -->

<div class="nomenu" id="mBody">

<div id="mainContent">
<h1>JMRI Hardware Guide: Digitrax DCC </h1>

<div class="toc">
<ul>
  <li><a href="#LocoNet">LocoNet Connections</a></li>
  <li><a href="#Programmer">PR2 and PR3 Programmers</a></li>
  <li><a href="#Setup">Setup</a></li>
  <li><a href="#Using">Using JMRI with LocoNet</a></li>
  <li><a href="#Network">Network Connections</a></li>
  <li><a href="#Limitation">Limitations</a></li>
  <li><a href="#Debugging">Debugging</a></li>
</ul>
</div>

<h2 id="LocoNet">LocoNet Connections</h2>

<p>JMRI, including DecoderPro and PanelPro, works with your Digitrax command
station to program decoders. To do this, it communicates with the command
station over the LocoNet using one of several types of LocoNet adapter.</p>

<p>DecoderPro will work with all the following command stations:</p>
<ul>
  <li>Zephyr Starter Set</li>
  <li>Super Empire Builder Set</li>
  <li>Super Chief Set</li>
  <li>DCS50 Command Station/Booster/Throttle </li>
  <li>DB150 Command Station/Booster</li>
  <li>DCS100 Command Station/Booster</li>
  <li>DCS200 Command Station/Booster</li>
  <li><a href="Uhlenbrock.shtml">Intellibox: The Uhlenbrock Central
  Unit</a></li>
  <li>DCC-Mux: DCC data combiner with built-in LocoNet command station </li>
</ul>

<p>To connect your computer to the LocoNet, and hence to the command station,
you need one of the following adapters:</p>
<ul>
  <li><a title="RR-CirKits USB interface" href="LocoBufferUSB.shtml">LocoBuffer-USB</a></li>
  <li><a title="Digitrax USB interface" href="PR3.shtml">PR3</a></li>
  <li><a title="RR-CirKits Serial interface" href="LocoBufferII.shtml">LocoBuffer II</a></li>
  <li><a title="Original Kit Version" href="LocoBuffer.shtml">LocoBuffer</a></li>
  <li><a title="Digitrax Serial interface" href="MS100.shtml">MS-100</a></li>
</ul>

<p>Generally, any of these can be used with any type of computer to communicate
with any type of command station. Currently, the LocoBuffer-USB and PR3 are the
recommended solutions. The LocoBuffer II and original LocoBuffer are no longer
being actively produced; their only advantage now is that they use a
traditional serial port rather than USB. The MS100 is not recommended; it
sometimes fails to provide reliable communications, and cannot be used with
JMRI if you are using MacOS X or on most Windows Vista machines. </p>

<p>The Uhlenbrock Intellibox can also be controlled directly through it's
serial port; there's a <a href="Uhlenbrock.shtml">separate page</a> on how to
do this. </p>

<h2 id="Programmer">PR2 and PR3 Programmers</h2>
JMRI can also use a <a title="Digitrax programmer" href="PR2.shtml">Digitrax PR2</a> or <a
title="Digitrax Programmer/USB interface" href="PR3.shtml">PR3</a> to program and test decoders. The PR2 is a stand-alone
unit which does not connect to the rest of the layout, the command station, nor
to a LocoNet. For more information on using a PR2 with DecoderPro, please see
the <a href="PR2.shtml">PR2 setup page</a>. The PR3 can either serve as an
interface (see above) or as a stand alone programmer. There is more information
on the <a href="PR3.shtml">PR3 setup page</a>. 

<h2 id="Setup">Setup</h2>

<p>To connect your computer to a Digitrax DCC system, you need a  <a
title="RR-CirKits USB interface" href="LocoBufferUSB.shtml">LocoBuffer-USB</a>,
<a title="Digitrax USB interface" href="PR3.shtml">PR3</a>, <a
title="RR-CirKits Serial interface"
href="LocoBufferII.shtml">LocoBuffer-II</a>, <a title="Original Kit Version"
href="LocoBuffer.shtml">LocoBuffer</a>, or <a title="Digitrax Serial interface"
href="MS100.shtml">MS100</a> to act as an adapter. See below for more
information on these. The LocoBuffer-USB is highly recommended. </p>

<p>Note that except for the PR3, these are only LocoNet interfaces, not stand
alone programmers like the Digitrax PR2 and PR3. None of these except the PR3
will let you read CVs if you have an Empire Builder! For that you need a Chief
or Zephyr command station. </p>
<ol>
  <li>Connect your adapter to the LocoNet, and connect your computer to it with
    the appropriate serial or USB cable. </li>
  <li>Mac and Windows users should install the proper USB drivers if they are
    using USB devices.</li>
  <li>Linux and Mac users should be sure that the correct Java communications
    packages have been installed.</li>
  <li>Open a JMRI program and go to the "Preferences" panel. This normally
    opens automatically the first time each program is run, or you can select
    it from the "Edit" menu. </li>
  <li>Select "LocoNet LocoBuffer-USB", "LocoNet MS100", or your device from the
    top selection box. You can then select the proper serial port in the second
    selection box. Check in your system hardware information if you are not
    sure which port to select.</li>
  <li>The baud rate box will be fixed and grayed out if you've selected
    LocoBuffer-USB, PR3, or MS100. There are two speed choices for the
    LocoBuffer and LocoBuffer-II; select the one that corresponds to the jumper
    settings on your LocoBuffer unit. We recommend that you start with the
    19,200 choice for the LocoBuffer or LocoBuffer-II; see the <a
    href="LocoBufferII.shtml">LocoBuffer-II</a> and <a
    href="LocoBuffer.shtml">LocoBuffer</a> pages for more information. </li>
  <li>The fourth box should be left on "hardware flow control" unless you later
    consistently get a message about the LocoBuffer control leads being
    improperly set up, in which case you might want to try to bypass that by
    selecting "no flow control". This box will be blank if you've selected
    LocoBuffer-USB, PR3 or MS100. </li>
  <li>In the fifth box, select the type of command station you have. Note that
    this program can't read decoder CVs if you have an Empire Builder (DB150);
    that's due to the Empire Builder hardware, and there's nothing we can do
    about it.To read CV's in conjunction with a DB150 use the PR3 in
    programming track mode.<br>
  </li>
  <li>The series of radio buttons labelled "GUI style" allows you to select how
    the program will look. "Metal" is the native Java look available on all
    types. Other choices will vary with your computer type. "Motif", "Windows",
    "MacOS" and "MacOS Adaptive" look native on Linux, Windows, MacOS "Classic"
    and MacOS X respectively. </li>
  <li>In the bottom selection box, you can pick the default programmer format.
    You can override this each time you open the programmer, so this is here
    just for convenience. If you are the primary user of this system we suggest
    you set this to "Comprehensive".<br>
  </li>
  <li>Click "Save". You'll be asked if it's OK for the program to quit, click
    "Yes". </li>
  <li style="text-align:left;">Restart the program. You should be up and
    running. <br>
  </li>
</ol>

<p>If you are going to control turnouts, signals or other devices on your
layout from JMRI or another program, we recommend that you set the command
station's "Meter route/switch output when not in trinary" option off. (T) When
on, this option greatly reduces the number of commands the LocoNet can handle
each second, which can cause significant delays when you're controlling
signals, etc. To turn it off, you can use the "Configure Command Station" tool
in the LocoNet menu to set Option Switch 31 to "T" (thrown), or set it directly
in the command station using a Digitrax throttle. </p>

<h2 id="Using">Using JMRI with LocoNet</h2>
There are a number of pages that discuss how to use JMRI with LocoNet: 
<ul>
  <li>For information on LocoNet-specific JMRI tools, please see the <a
    href="../../apps/LocoTools/index.shtml">LocoTools page</a>. </li>
  <li>Many LocoNet devices can be directly addressed by JMRI. For more
    information on how to find those addresses, see <a
    href="Addressing.shtml">this page</a>. </li>
</ul>

<p>Of course, the <a href="../../apps/DecoderPro/index.shtml">DecoderPro</a>
and <a href="../../apps/PanelPro/PanelPro.shtml">PanelPro</a> JMRI applications
work very well with LocoNet. </p>

<h2 id="Network">Network Connections</h2>
There are several methods available to connect multiple computers to a single
LocoNet. These communicate via standard TCP/IP protocols, and can even work
remotely. <a href="LocoNetworking.shtml">For more information ...</a> 

<h2 id="Limitation">Limitations</h2>

<p><strong>PR-1 not supported</strong> - Note that DecoderPro cannot directly
program decoders via a PR1 programmer. You have to use one of the command
stations above.</p>

<p><b>MacOS X and the MS100</b> - Because MacOS X can't communicate at the
special baud rate used by the MS100, the MS100 won't work with MacOS X. You
should get a LocoBuffer-USB instead. </p>

<p><b>Microsoft Vista and the MS100</b> - It has been reported that Vista does
not support the special baud rate used by the MS100. If you find that your
MS-100 does not work on your Vista machine you should get a LocoBuffer-USB or
PR3 instead.<br>
</p>

<p><b>Serial ports on older Macintoshes and the MS100</b> - A standard
Macintosh RS422 serial port will not work directly with an MS100. Since it
doesn't have two output status lines (DTR and RTS), it can't provide the
correct power to the MS100. A LocoBuffer or LocoBuffer-II will work fine with a
standard Macintosh RS422 serial port.<br>
</p>

<p><b>Apple USB connections</b> - DecoderPro is tested with both a MS100 and a
LocoBuffer on a USB Macintosh using a Keyspan PDA Adapter to provide the serial
port; for information please see <a
href="http://jmri.sourceforge.net/DigiTrax/KeyspanAdapters/KeyspanUSB.shtml">http://jmri.sourceforge.net/DigiTrax/KeyspanAdapters/KeyspanUSB.shtml</a>.
Note that we've had a report that certain models of the PDA adapter don't work
at 57,600 baud with the LocoBuffer, so please try 19,200 baud if you're having
trouble. See our page on <a href="hardware/USBtoSerial.shtml">USB adapters</a>
for more information.<br>
</p>

<p><b>Uhlenbrock Intellibox</b> - The Intellibox has two LocoNet connections,
called LocoNet-T and LocoNet-B. The LocoNet-T connection can drive more
devices, but does not provide the Rail-Synch signals that some LocoNet devices
(particularly the BDL-16, -162 and -168) require. A LocoBuffer should be
connected to the LocoNet-T connection. </p>

<h2 id="Debugging">Debugging</h2>

<p><a href="http://www.digitrax.com/pdfdocs.htm">Digitrax Manuals</a></p>
<!--#include virtual="/Footer" -->
</div>
</div>
</body>
</html>
