<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<!-- $Id: index.html,v 1.3 2005-03-23 17:14:44 jacobsen Exp $ -->
<html lang="en">
<head>
  <TITLE>
 	JMRI: Signaling
  </TITLE>
  <META http-equiv=Content-Type content="text/html; charset=iso-8859-1">

  <META content="Bob Jacobsen" name=Author>

  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <meta name="keywords"
        content="JMRI PanelPro signaling signalling SE8 SE8C C/MRI">

<!-- Style -->
  <META http-equiv=Content-Type content="text/html; charset=iso-8859-1">
  <link rel="stylesheet" type="text/css" href="/css/default.css" media="screen">
  <link rel="stylesheet" type="text/css" href="/css/print.css" media="print">
  <link rel="icon" href="/images/jmri.ico" type="image/png">
  <link rel="home" title="Home" href="/">
<!-- /Style -->
</head>

<body>
  <div id="container">
    <p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>

<!-- Header -->
    <div id="header">
	<!-- Logo -->
	<a href="/" title="Return to home page" accesskey="1">
	    <img src="/images/logo-jmri.gif" width="160" height="135" alt="JMRI Logo"> </a>
	<!-- /Logo -->
	<ul id="mainNav"> <!-- Top tool bar -->
	   <li><a href="/download/"  title="Get the latest software">Download</a></li>
	   <li><a href="/apps/"      title="Learn about JMRI applications">Applications</a></li>
	   <li><a href="/hardware/"  title="What hardware does JMRI support">Hardware</a></li>
	   <li><a href="/doc/Manual/"   title="Trouble-shooting, and FAQs">Manual</a></li>
	   <li><a href="/doc/Technical/" title="Developing and extending JMRI">Developers</a></li>
	   <li><A href="/community/" title="Who is JMRI">Acknowledgements</a></li>
	</ul>

	<div id="searchform"> <!--  Search Form -->
	  <form id="search" method="get" action="http://www.google.com/custom">
	     <label for="q" title="Search JMRI.SourceForge.net">search JMRI: </label>
	     <input type="hidden" name="cof" value="LW:200;LH:95;L:http://JMRI.sourceforge.net/images/logo.gif;GIMP:#cc0000;T:black;ALC:#0000ff;GFNT:grey;LC:#990000;BGC:white;AH:center;VLC:purple;GL:0;GALT:#666633;AWFID:9262c37cefe23a86;">
	    <input type="hidden" name="domains" value="JMRI.sourceforge.net">
	    <input type="hidden" name="sitesearch" value="JMRI.sourceforge.net">
	    <input type="text" id="q" name="q" accesskey="s" size="30">
	    <input type="submit" id="submit" value="go">
	  </form>
       </div> <!--  End #searchform -->
    </div> <!-- closes #header-->
<!-- /Header -->


    <hr class="hide">

    <div class="nomenu" id="mBody">
      <div id="mainContent">
      <!-- Page Body -->
        <H2>
		JMRI: Signaling
        </H2>


Modeling railroad signaling on a layout can be done many different ways,
ranging from "stoplights" to complete emulation of a particular prototype's
signaling logic.
<P>
JMRI provides several different things that can help with this:
<OL>
<LI>The JMRI 
<A HREF="#table">"Signal Table"</A>
tool lets you control the appearance
of individual signals on your layout.  This can be useful for
debugging, for example.
<LI>The JMRI 
<A HREF="#logic">"Simple Signal Logic"</A>
tool can provide simple versions
of block and interlocking signaling.
<LI>The JMRI 
<A HREF="#automat">Automation classes</A>
makes it easy to code your own signal
logic into the program.  This is how Nick Kulp's Cornwall Railroad 
was signalled.
<LI>JMRI scripting provides a comprehensive programming capability.
<LI>JMRI provides a 
<A HREF="#widgets">complete toolkit</A>
to make it easy to
do any kind of automation on your layout by writing a new program
of your own.
</OL>
<BR>
There's more information on each of these below.
As you move down that list, the task becomes more and more technical, 
but you have more freedom to model exactly what you want.  

<P>
In addition, there are people working on more advanced signaling
logic within the JMRI project.  Although it's too early to talk
in detail, the idea is to provide ways of driving semi-prototypical
signaling logic, including CTC dispatching and interlocking, 
without requiring the user to write any Java code.  The 
<a href="http://groups.yahoo.com/group/jmriusers/">jmriusers discussion group</A>
will have more info on this as it becomes available.


<A id="table"><h3>Signal Table</h3></a>
<A href="./images/SigTable.gif"><IMG SRC="./images/SigTable.gif" ALIGN=RIGHT WIDTH="170" HEIGHT="314" HSPACE="0" VSPACE="0"></A>
All the signals that JMRI knows about can be referenced
using the "Signal Table" tool in the Tools menu of most JMRI programs.
<P>As the signal changes, for whatever reason, the current
appearance will show in the table.  You can also click on the
appearance button to cycle through red, yellow and green.
<P>If you're interested in having your signals carry "human readable"
names, you can click in the "user name" column and change that information
to whatever you want.
<P>To define a new signal, click on the "Add.." button.  It will
prompt you for the type (run off turnout outputs; SE8c; etc), and
whatever setup information is needed.
<P> This information is saved with the configuration in an XML file, along
with control panel setup and similar stuff.  For more information
on creating and displaying panels, including how to show signals,
please see the 
<A HREF="../PanelPro/Panels.html">Panels pages</a>
and the pages on the 
<A HREF="../PanelPro/Panels-Cornwall/Cornwall.html">Cornwall Railroad control panel</a>.

<A id="logic"><h3>Simple Signal Logic</h3></a>
<A href="./images/SigAdd.gif"><IMG SRC="./images/SigAdd.gif" ALIGN=RIGHT WIDTH="220" HEIGHT="132" HSPACE="0" VSPACE="0" ALT="Simple Signal Logic panel figure"></a>

Much of basic signaling can be boiled down to "a signal goes red when a train
can't safely enter the block it protects; it goes yellow when the following 
block can't be entered". Although that's a simplication, it can serve
as a powerful starting point for signaling logic.
<P>
The Simple Signal Logic tool allows you to configure JMRI to 
use that type of logic to set the appearance of a signal. 
Using the panel, you enter information on:
<UL>
<LI>The signal being driven
<LI>Which sensor (occupancy detector) covers the block
past the signal; when that sensor shows "active" the 
signal will be set to red
<LI>If the block contains a trailing point turnout, 
configure the turnout name and whether you're entering
the closed or thrown leg; the signal will be set red
when the turnout is set against this track
<LI>And the next signal that the train will reach;
the signal will be set yellow if the next signal is
red.  If the checkbox is checked, the signal will be set
flashing yellow (not all types can show that!) if the
next signal is yellow, thereby giving four-block signaling.
</ul>
The case of a facing point switch which can lead 
to two different "next signals" is also yet covered
although the figure doesn't show it.
<P>
<A HREF="SimpleSignalExample.html">A worked-out example</a> is available on 
a separate page.
<P>
It's clear that this won't cover complicated interlockings
and similar situations, nor will it cover the speed-signaling
seen on some prototypes.  But for simple block and route 
signaling, it will do pretty well.
<A id="automat"><h3>Automation classes</h3></a>

JMRI provides classes to help you write Java code to control
your layout.  The most powerful of these are aimed
at general automation; see the 
<A HREF="../Automation/viaJava.html">automation web page</a>.
The 
<A HREF="../../JavaDoc/doc/jmri/jmrit/automat/Siglet.html">"Siglet" class</A> 
and it's kin are meant to make it
easy to write signal logic; a varient of these was used
for the Cornwall Railroad.
<P>
Although these require writing code, instead of just filling
out a GUI form, the program handles all of the details of reading
status changes from the layout, writing desired aspect changes
back to the layout, and even the details of "which outputs do I have
to set to get signal Apple Siding East to show yellow?".  You can
concentrate on just the signal logic in the code you write.
<A id="widgets"><h3>Toolkit</h3></a>
The entire
<A HREF="../../doc/Technical/">JMRI toolkit</A>
is available for use if you really want to do something
in detail. JMRI provides control of most DCC and C/MRI systems,
with useful tools for manipulating turnouts, sensors, signals, locomotives,
etc as well as powerful tools for working on the user screen.


<!-- Footer -->
    <hr class="hide">
    <div id="footer">
	<ul id="bn">
	<li><a href="/sitemap/">Site Map</a></li>
	<li><a href="/contact/">Contact Us</a></li>
	</ul>

	<p>Thanks and congratulations to
	   <A href="/community/" title="Who is JMRI">
	   	all who contributed</A>! </p>

	<p>Copyright &copy; 1997 - 2004 JMRI Community. 
	<P>JMRI, DecoderPro, PanelPro, DispatcherPro and associated logos are our trademarks.
	<P><A href="/Copyright.html">Additional information on copyright, trademarks and licenses is linked here.</a></p>
    
       <BR/>Site hosted by: <BR/>
        <A href="http://sourceforge.net"> 
        <IMG src="http://sourceforge.net/sflogo.php?group_id=26788&amp;type=1" width="88" height="31" border="0" alt="SourceForge Logo"> </A> 


    </div>
<!-- /Footer -->

      </div><!-- closes #mainContent-->
    </div> <!-- closes #mBody-->
  </div> <!-- closes #container -->
</body>
</html>
