<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
 <TITLE>
      JMRI Hardware Guide: SPROG
 </TITLE>
    <META http-equiv=Content-Type content="text/html; charset=iso-8859-1">
    <META content="Bob Jacobsen, LBL" name=Author>
    <META name="keywords" content="SPROG java model railroad JMRI install windows">

<!-- Style -->
   <!-- $Id: SPROG.html,v 1.4 2004-07-19 01:10:28 jacobsen Exp $ -->
  <META http-equiv=Content-Type content="text/html; charset=iso-8859-1">
  <link rel="stylesheet" type="text/css" href="/css/default.css" media="screen">
  <link rel="stylesheet" type="text/css" href="/css/print.css" media="print">
  <link rel="icon" href="/images/jmri.ico" type="image/png">
  <link rel="home" title="Home" href="/">
<!-- /Style -->
</head>

<body>
<div id="container">
  <p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<!-- Header -->
    <div id="header">
	<!-- Logo -->
	<a href="/" title="Return to home page" accesskey="1">
	    <img src="/images/logo-jmri.gif" width="160" height="135" alt="JMRI Logo"> </a>
	<!-- /Logo -->
	<ul id="mainNav"> <!-- Top tool bar -->
	   <li><a href="/download/"  title="Get the latest software">Download</a></li>
	   <li><a href="/apps/"      title="Learn about JMRI applications">Applications</a></li>
	   <li><a href="/hardware/"  title="What hardware does JMRI support">Hardware</a></li>
	   <li><a href="/doc/Manual/"   title="Trouble-shooting, and FAQs">Manual</a></li>
	   <li><a href="/doc/Technical/" title="Developing and extending JMRI">Developers</a></li>
	   <li><A href="/community/" title="Who is JMRI">Acknowledgements</a></li>
	</ul>

	<div id="searchform"> <!--  Search Form -->
	  <form id="search" method="get" action="http://www.google.com/custom">
	     <label for="q" title="Search JMRI.SourceForge.net">search JMRI: </label>
	     <input type="hidden" name="cof" value="LW:200;LH:95;L:http://JMRI.sourceforge.net/images/logo.gif;GIMP:#cc0000;T:black;ALC:#0000ff;GFNT:grey;LC:#990000;BGC:white;AH:center;VLC:purple;GL:0;GALT:#666633;AWFID:9262c37cefe23a86;">
	    <input type="hidden" name="domains" value="JMRI.sourceforge.net">
	    <input type="hidden" name="sitesearch" value="JMRI.sourceforge.net">
	    <input type="text" id="q" name="q" accesskey="s" size="30">
	    <input type="submit" id="submit" value="go">
	  </form>
       </div> <!--  End #searchform -->
    </div> <!-- closes #header-->
<!-- /Header -->





  <hr class="hide">

  <div class="nomenu" id="mBody">
    <div id="mainContent">
      <H2> 
      JMRI Hardware Guide: SPROG
      </H2>

	<H3>Supported Hardware</H3>

	<UL>
	<li>SPROG
	</UL>

	<H3>Limitations</H3>

	<p>TBD</p>

	<H3>Setup</H3>

	  <ol>
	  <li> Once you have your SPROG assembled and configured (see
	  below), connect it to the computer's serial port using a 9-pin
	  serial cable. </li>

	  <li> Then go to the preferences panel of a JMRI-based program.  This
	  opens automatically the first time a program is run, or you can select
	  it from the "Edit" menu. </li>

	  <li>Select "SPROG" from the top selection box. You can then select the
	  proper serial port in the second selection box. </li>

	  <li> The series of radio buttons labelled "GUI style" allows you to
	  select how the program will look. "Metal" is the native Java look
	  available on all types. Other choices will vary with your computer type.
	  "Motif", "Windows", "MacOS" and "MacOS Adaptive" look native on Linux,
	  Windows, MacOS "Classic" and MacOS X respectively.</li>

	  <li> In the bottom selection box, you can pick the default programmer
	  format. You can override this each time you open the programmer, so this
	  is here just for convenience. </li>

	  <li> Click "Save".  You'll be asked if it's OK for the program to
	  quit, click "Yes".</li>
	  <li> Restart the program. You should be up and running.</li>
	  </ol>

	<H3>Configuring SPROG</H3>
	  <p>SPROG has 3 operation modes:
	  <ul>
	  <li> P_mode&nbsp;&nbsp; (programming mode)
	  <li> RR_mode&nbsp;&nbsp; (rolling road/test mode)
	  <li> B_mode&nbsp;&nbsp; (booster mode) 
	  </ul>

	  <p>To get SPROG working with DecoderPro properly it needs to be setup to
	  do so with the M and W commands. Fortunately one can use binary values
	  here, so it's very easy to determine the right value using a
	  table.</p>

	  <p>We need to deselect the <TT>ECHO all characters</tt>, the
	  <tt>RR_mode</tt> and the <tt>B_mode</tt>:</p>

	  <table border="1" cellspacing="2" cellpadding="2"
	   style="text-align: left; width: 50%;">

	    <thead><tr><td colspan=17> Table to establish the configuration
	    value:</td></tr>
	    <tbody>
	      <tr>
		<td style="vertical-align: top; text-align: left;">Bit<br>
		</td>
		<td style="vertical-align: top;" align="center">15</td>
		<td style="vertical-align: top;" align="center">14<br>
		</td>

		<td style="vertical-align: top;" align="center">13<br>
		</td>
		<td style="vertical-align: top;" align="center">12<br>
		</td>
		<td style="vertical-align: top;" align="center">11<br>
		</td>
		<td style="vertical-align: top;" align="center">10<br>

		</td>
		<td style="vertical-align: top;" align="center">9<br>
		</td>
		<td style="vertical-align: top;" align="center">8<br>
		</td>
		<td style="vertical-align: top;" align="center">7<br>
		</td>

		<td style="vertical-align: top;" align="center">6<br>
		</td>
		<td style="vertical-align: top;" align="center">5<br>
		</td>
		<td style="vertical-align: top;" align="center">4<br>
		</td>
		<td style="vertical-align: top;" align="center">3<br>

		</td>
		<td style="vertical-align: top;" align="center">2<br>
		</td>
		<td style="vertical-align: top;" align="center">1<br>
		</td>
		<td style="vertical-align: top;" align="center">0<br>
		</td>

	      </tr>
	      <tr>
		<td style="vertical-align: top;">Name<br>
		</td>
		<td style="vertical-align: top;">spare<br>
		</td>
		<td style="vertical-align: top;">spare</td>

		<td style="vertical-align: top;">spare<br>
		</td>
		<td style="vertical-align: top;">LONG<br>
		</td>
		<td style="vertical-align: top;">SP128<br>
		</td>
		<td style="vertical-align: top;">SP28<br>

		</td>
		<td style="vertical-align: top;">SP14<br>
		</td>
		<td style="vertical-align: top;">DIR<br>
		</td>
		<td style="vertical-align: top;">spare<br>
		</td>

		<td style="vertical-align: top;">spare</td>
		<td style="vertical-align: top; text-align: center;">B_<br>
		</td>
		<td style="vertical-align: top; text-align: center;">RR_<br>
		</td>
		<td style="vertical-align: top;">CALC_<br>
		</td>

		<td style="vertical-align: top;">VERBOSE </td>
		<td style="vertical-align: top; text-align: center;">ECHO<br>
		</td>
		<td style="vertical-align: top; text-align: center;">MODE<br>
		</td>
	      </tr>
	      <tr>

		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>

		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>

		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;">MODE<br>
		</td>
		<td style="vertical-align: top;">MODE<br>
		</td>

		<td style="vertical-align: top;">ERROR<br>
		</td>
		<td style="vertical-align: top;"> <br>
		</td>
		<td style="vertical-align: top; text-align: center;">_ON<br>
		</td>
		<td style="vertical-align: top; text-align: center;">_SET<br>

		</td>
	      </tr>
	      <tr>
		<td style="vertical-align: top;">Feature<br>
		</td>
		<td style="vertical-align: top; text-align: center;">allways =0<br>
		</td>
		<td style="vertical-align: top; text-align: center;">allways =0</td>

		<td style="vertical-align: top; text-align: center;">allways =0<br>
		</td>
		<td style="vertical-align: top;">long addr.<br>
		</td>
		<td style="vertical-align: top;">speed steps<br>
		</td>
		<td style="vertical-align: top;">speed steps<br>

		</td>
		<td style="vertical-align: top;">speed steps<br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top; text-align: center;">allways =0<br>
		</td>
		<td style="vertical-align: top; text-align: center;">allways =0</td>

		<td style="vertical-align: top;">booster mode<br>
		</td>
		<td style="vertical-align: top;">rolling road mode<br>
		</td>
		<td style="vertical-align: top;">calc. error byte<br>
		</td>
		<td style="vertical-align: top;">verbose mode </td>

		<td style="vertical-align: top;">echo all characters </td>
		<td style="vertical-align: top;">default prog.mode page=0
	  direct=1 </td>
	      </tr>
	      <tr>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>

		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>

		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>

		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"> <br>
		</td>

		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
	      </tr>
	      <tr>
		<td style="vertical-align: top;">Example<br>
		</td>

		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>

		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>

		<td style="vertical-align: top;"> <br>
		</td>
		<td style="vertical-align: top;"> <br>
		</td>
		<td style="vertical-align: top;"> <br>
		</td>
		<td style="vertical-align: top;"> <br>

		</td>
		<td style="vertical-align: top;"> <br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
	      </tr>

	      <tr>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>

		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>

		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>

		<td style="vertical-align: top;"> <br>
		</td>
		<td style="vertical-align: top;"> <br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>

	      </tr>
	      <tr>
		<td style="vertical-align: top;">Bits set:<br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>

		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top; text-align: center;">X<br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>

		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>

		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top; text-align: center;"> X<br>
		</td>
		<td style="vertical-align: top;"> <br>
		</td>

		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
	      </tr>
	      <tr>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>

		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>

		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"> <br>
		</td>
		<td style="vertical-align: top;"> <br>
		</td>

		<td style="vertical-align: top;"> <br>
		</td>
		<td style="vertical-align: top;"> <br>
		</td>
		<td style="vertical-align: top;"> <br>
		</td>
		<td style="vertical-align: top;"> <br>

		</td>
		<td style="vertical-align: top;"> <br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
		<td style="vertical-align: top;"><br>
		</td>
	      </tr>

	      <tr>
		<td style="vertical-align: top;">Value bin<br>
		</td>
		<td style="vertical-align: top;" align="center">0<br>
		</td>
		<td style="vertical-align: top;" align="center">0<br>
		</td>

		<td style="vertical-align: top;" align="center">0<br>
		</td>
		<td style="vertical-align: top;" align="center">0<br>
		</td>
		<td style="vertical-align: top;" align="center">1<br>
		</td>
		<td style="vertical-align: top;" align="center">0<br>

		</td>
		<td style="vertical-align: top;" align="center">0<br>
		</td>
		<td style="vertical-align: top;" align="center">0<br>
		</td>
		<td style="vertical-align: top;" align="center">0<br>
		</td>

		<td style="vertical-align: top;" align="center">0<br>
		</td>
		<td style="vertical-align: top;" align="center">0<br>
		</td>
		<td style="vertical-align: top;" align="center">0<br>
		</td>
		<td style="vertical-align: top;" align="center">1 </td>

		<td style="vertical-align: top;" align="center"> 0<br>
		</td>
		<td style="vertical-align: top;" align="center">0<br>
		</td>
		<td style="vertical-align: top;" align="center">0<br>
		</td>
	      </tr>

	    </tbody>
	  </table>

	  <p>This will result in a binary value of: b = 0000100000001000</p>

	  <p>To program this into SPROG start a terminal program (like Hyperterm
	  with WIN) and give SPROG a reset. This will show up the following
	  screen:<br>
	  <ul>
	  <tt>
	  SPROG DCC Serial Port Programmer, Ver 1.1a<br>
	  M S P B R W<br>
	  P: C V<br>
	  R: + - &lt; &gt; A F O<br>
	  P&gt;<br>
	  </tt>
	  </ul></p>

	  Entering <tt>M&nbsp;</tt> will return the current configuration (example only!). <br>
	  <ul>
	  <tt>
	  SPROG DCC Serial Port Programmer, Ver 1.1a<br>
	  M S P B R W<br>
	  P: C V<br>
	  R: + - &lt; &gt; A F O<br>

	  P&gt; M=b0001100000011110<br>
	  P&gt;<br>
	  </tt>
	  </ul>

	  <p>Now enter <tt>M b0000100000001000</tt></p>
	  <p>and enter <tt>W b0000100000001000</tt></p>
	  <p>This last operation will program the configuration into the nonvolatile memory.</p>
	  <p>Check by entering <tt>M</tt> , you should see the same value as entered before.</p>

	  <p>Now you are ready to operate SPROG with JMRI.</p>

	<H3>Debugging</H3>

	<p>For more information on the SPROG, please see <a
	   href="http://www.sheerstock.fsnet.co.uk/dcc/sprog.htm">the SPROG web
	  pages</a>.</p>
	<p>There is a useful <a
	   href="http://www.sheerstock.fsnet.co.uk/dcc/sprogFAQ.htm">FAQ
	   page</a>.</p>

	<p>If you fail to get a connection with DecoderPro, check your serial
	connection on the SPROG board. It should be made as follows <br>
	(all pin locations are for a 9 pin D-SUB female):
	<ul>
	<li> J8&nbsp; -&gt; pin 3
	<li> J9&nbsp; -&gt; pin 2
	<li> J11 -&gt; pin 7
	<li> J15 -&gt; pin 8
	<li> ground -&gt; pin 5
	</ul></p>

	<p> If still no connection, check if you use a MAX232N serial
	driver chip.  This one requires1&micro;F Electrolytic caps instead
	of the specified 100 nF (C 11, 12, 13, 14).</p>

      <hr class="hide">
<!-- Footer -->
    <hr class="hide">
    <div id="footer">
	<ul id="bn">
	<li><a href="/sitemap/">Site Map</a></li>
	<li><a href="/contact/">Contact Us</a></li>
	</ul>

	<p>Thanks and congratulations to
	   <A href="/community/" title="Who is JMRI">
	   	all who contributed</A>! </p>

	<p>Copyright &copy; 2003,2004 JMRI Community</p>
        <BR/>Site hosted by: <BR/>
        <A href="http://sourceforge.net"> 
        <IMG src="http://sourceforge.net/sflogo.php?group_id=26788&amp;type=1" width="88" height="31" border="0" alt="SourceForge Logo"> </A> 


    </div>
<!-- /Footer -->

   </div><!-- closes #mainContent-->
  </div> <!-- closes #mBody-->
</div> <!-- closes #container -->
</body>
</html>

