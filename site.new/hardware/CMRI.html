<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
 <TITLE>
      JMRI Hardware Guide: Chubb C/MRI
 </TITLE>
    <META http-equiv=Content-Type content="text/html; charset=iso-8859-1">
    <META content="Bob Jacobsen, LBL" name=Author>
    <META name="keywords" content="Bruce Chubb C/MRI Computer interface java model railroad JMRI install windows">

    <link rel="stylesheet" type="text/css" href="../css/default.css" media="screen">
    <link rel="stylesheet" type="text/css" href="../css/print.css" media="print">
    <link rel="icon" href="../images/jmri-16.png" type="image/png">
    <link rel="home" title="Home" href="http://jmri.sourceforge.net/">
</head>

<body>
<div id="container">
  <p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<!-- Header -->
    <div id="header">
	<!-- Logo -->
	<a href="/site.new/" title="Return to home page" accesskey="1">
	    <img src="/site.new//images/logo-jmri.gif" width="160" height="135" alt="JMRI Logo"> </a>
	<!-- /Logo -->
	<ul id="mainNav"> <!-- Top tool bar -->
	   <li><a href="/site.new/download/"  title="Get the latest software">Download</a></li>
	   <li><a href="/site.new/apps/"      title="Learn about JMRI applications">Applications</a></li>
	   <li><a href="/site.new/hardware/"  title="What hardware does JMRI support">Hardware</a></li>
	   <li><a href="/site.new/doc/Manual/"   title="Trouble-shooting, and FAQs">Manual</a></li>
	   <li><a href="/site.new/doc/Technical/" title="Developing and extending JMRI">Developers</a></li>
	   <li><A href="/site.new/community/" title="Who is JMRI">Acknowledgements</a></li>
	</ul>

	<div id="searchform"> <!--  Search Form -->
	  <form id="search" method="get" action="http://www.google.com/custom">
	     <label for="q" title="Search JMRI.SourceForge.net">search JMRI: </label>
	     <input type="hidden" name="cof" value="LW:200;LH:95;L:http://JMRI.sourceforge.net/images/logo.gif;GIMP:#cc0000;T:black;ALC:#0000ff;GFNT:grey;LC:#990000;BGC:white;AH:center;VLC:purple;GL:0;GALT:#666633;AWFID:9262c37cefe23a86;">
	    <input type="hidden" name="domains" value="JMRI.sourceforge.net">
	    <input type="hidden" name="sitesearch" value="JMRI.sourceforge.net">
	    <input type="text" id="q" name="q" accesskey="s" size="30">
	    <input type="submit" id="submit" value="go">
	  </form>
       </div> <!--  End #searchform -->
    </div> <!-- closes #header-->
<!-- /Header -->





  <hr class="hide">

  <div class="nomenu" id="mBody">
    <div id="mainContent">
      <H2> 
      JMRI Hardware Guide: Chubb C/MRI
      </H2>
      
	<H3>Supported Hardware</H3>

	<UL>
	<li>Chubb C/MRI USIC
	<li>Chubb C/MRI SMINI
	<li>TracTronics
	</UL>

	<H3>Limitations</H3>

	<p>The JMRI libraries have built-in support for C/MRI serial hardware
	using the USIC and .
	C/MRI inputs can be used as sensors, and outputs can be driven as
	turnouts.</p>

	<p>At this time, the directly connected IBEC and UBEC interfaces are
	not supported.</p>

	<dl>
	<dt class=left>Use with an SMINI board</dt>
	<dd class=top>
	    <p>It's easiest to try JMRI with a SMINI board, as there's no
	    options to be configured for the C/MRI hardware.
	    <ol>
		<li>Start the JMRIdemo program
		<li>From the edit menu, select preferences and configure:
	        <ul>
		    <li>Protocol as "C/MRI serial"
		    <li>For serial port, select the one your hardware is attached to.
		    <li>Select the baud rate your C/MRI system uses
		    <li>Select "SMINI" from the initialization box
		    <li>Click save, and say yes when it asks if you want to quit.
	        </ul>
		<li>Restart the JMRIdemo program. Your SMINI's red and yellow
		LEDs should now be flashing, indicating that the computer and
		SMINI are talking.
		<li>To check that everything is working, select "Turnout
		Control" from the tools menu.  This will open a small window in
		which you can select a turnout number (<a href="#numbers">see
		below</a>), then click closed/thrown to change the state of
		that output.
	    </ol>
	</dd>

	<dt class=left>Use with other C/MRI hardware</dt>
	<dd>
	<p>A C/MRI system needs an initialization string before it can
	communicate.  	Look at C/MRI in July 1986 MRr, which says the format
	of the initialization message is:</p>

	<p class=example>
	    0x41  UA+65, starting with UA 0<br>
	    0x49  "I" for initialization<br>
	    0x4E  "N" CRC not enabled<br>
	    0x01  delay MSByte<br>
	    0x09  delay LSByte  (units are 10usec)<br>
	    0x01  NS=1   Number of card-Sets-of-four<br>
	    0x02  CT(1) = 2  (up to NS items appear here)<br>
	            each CT value is set of 4 2-bit fields coded <br>
	            0=no-card, 1=input-card, 2=output-card, 3=reserved<br>
	            LS2bits is card in slot 1 of the set of four, <br>
	            MS2bits is card in slot 4 of the set of four
	</p>

	<p>(The sofware puts the STX, DLE and ETX characters as needed to frame
	the packet). More recent hardware, like the SMINI, use slightly
	different messages. 

	<p> For example, a system with 8 input cards would have:</p>
	<p class=example>
	     41 49 4E 01 09 02 55 55
	</p>

	<p>Nick Kulp's Cornwall Railroad has 2 output cards, then 2 input
	cards, then three output cards, an input card, and one more output
	cards.  It uses the string:
	<p class=example>
	 41 49 4E 00 0A 03 5A 9A 02
	</p>

	<p> Note that you're referring to the cards by the addresses set on
	them, not by their position on the motherboard.  </p>

	<p> Enter the initialization message for your system in the preferences
	panel, and then restart the program.</p>

	</dd>

	<dt class=left><a name=numbers>Numbering</a></dt>
	<dd>
	<p>C/MRI system names start with "C". For example, "CS24" is a C/MRI
	"S"ensor, the 24th input line.</p>

	<p>Inputs and outputs are numbered sequentially from 1, without
	worrying about the types of cards, etc. For example, if you have two
	24-input cards, CS25 refers to the 1st input line on the second card.
	If you have two 32 input cards, CS25 refers to the 25th input line on
	the first card.</p>

	<p>Each SMINI, USIC or SUSIC is called a "node". Sensors and turnouts
	on the first node are numbered from 1 to 999; sensors and turnouts on
	the second node are numbered 1001 to 1999; etc. </p>
	</dl>

	<H3> More info </H3>
    	<p>For more information on C/MRI, please see the </p>
	<p><a HREF="http://www.jlcenterprises.net/">JLC Enterprises web site</a>
	and the 
	<a HREF="http://groups.yahoo.com/group/CMRI_Users/">C/MRI yahoo users group</a>.
	</p>

      <hr class="hide">
<!-- Footer -->
    <hr class="hide">
    <div id="footer">
	<ul id="bn">
	<li><a href="/site.new/sitemap/">Site Map</a></li>
	<li><a href="/site.new/contact/">Contact Us</a></li>
	</ul>

	<p>Thanks and congratulations to
	   <A href="/site.new/community/" title="Who is JMRI">
	   	all who contributed</A>! </p>

	<p>Copyright &copy; 2003,2004 JMRI Community</p>
    </div>
<!-- /Footer -->

   </div><!-- closes #mainContent-->
  </div> <!-- closes #mBody-->
</div> <!-- closes #container -->
</body>
</html>

