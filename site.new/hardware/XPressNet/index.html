<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<!-- $Id: index.html,v 1.14 2005-06-10 01:51:21 pbender Exp $ -->
<html lang="en">
<head>
<TITLE>
JMRI: XPressNet

</TITLE>
<META http-equiv=Content-Type content="text/html; charset=iso-8859-1">
<META content="Paul Bender" name=Author>
<META name="keywords" content="XPressNet java model railroad JMRI install">

<!-- Style -->
  <META http-equiv=Content-Type content="text/html; charset=iso-8859-1">
  <link rel="stylesheet" type="text/css" href="/css/default.css" media="screen">
  <link rel="stylesheet" type="text/css" href="/css/print.css" media="print">
  <link rel="icon" href="/images/jmri.ico" type="image/png">
  <link rel="home" title="Home" href="/">
<!-- /Style -->

<style>
	span.supported { color:green; }
	span.unsupported { color:red;
			   text-decoration: line-through;}
	span + span.supported:before {content: " + "; }
	span + span.unsupported:before {content: " - "; }
</style>
</head>

<body>
<div id="container">
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<!-- Header -->
    <div id="header">
	<!-- Logo -->
	<a href="/" title="Return to home page" accesskey="1">
	    <img src="/images/logo-jmri.gif" width="160" height="135" alt="JMRI Logo"> </a>
	<!-- /Logo -->
	<ul id="mainNav"> <!-- Top tool bar -->
	   <li><a href="/download/"  title="Get the latest software">Download</a></li>
	   <li><a href="/apps/"      title="Learn about JMRI applications">Applications</a></li>
	   <li><a href="/hardware/"  title="What hardware does JMRI support">Hardware</a></li>
	   <li><a href="/doc/Manual/"   title="Trouble-shooting, and FAQs">Manual</a></li>
	   <li><a href="/doc/Technical/" title="Developing and extending JMRI">Developers</a></li>
	   <li><A href="/community/" title="Who is JMRI">Acknowledgements</a></li>
	</ul>

	<div id="searchform"> <!--  Search Form -->
	  <form id="search" method="get" action="http://www.google.com/custom">
	     <label for="q" title="Search JMRI.SourceForge.net">search JMRI: </label>
	     <input type="hidden" name="cof" value="LW:200;LH:95;L:http://JMRI.sourceforge.net/images/logo.gif;GIMP:#cc0000;T:black;ALC:#0000ff;GFNT:grey;LC:#990000;BGC:white;AH:center;VLC:purple;GL:0;GALT:#666633;AWFID:9262c37cefe23a86;">
	    <input type="hidden" name="domains" value="JMRI.sourceforge.net">
	    <input type="hidden" name="sitesearch" value="JMRI.sourceforge.net">
	    <input type="text" id="q" name="q" accesskey="s" size="30">
	    <input type="submit" id="submit" value="go">
	  </form>
       </div> <!--  End #searchform -->
    </div> <!-- closes #header-->
<!-- /Header -->





<hr class="hide">

<div class="nomenu" id="mBody">
<div id="mainContent">
<H1>
	JMRI Hardware Guide: XPressNet
</H1>

<H2>Overview</H2>
    <p>XPressNet is the Command Bus used by <a 
	href="http://www.atlasrr.com">Atlas</a>, <a 
	href="http://www.lenz.com">Lenz</a>, <a 
	href="http://www.ztccontrols.com">ZTC Controls</a>, and <a 
	href="http://www.roco.co.at">Roco</a>.
    It was developed by Lenz.  The XPressNet specification (available from
    the Lenz website) specifies the electrical communications standards and
    command set needed for devices to communicate with the command station.
    While the command stations support the same commands over the XPressNet
    connection, they do not all use the same connectors.  It may be necessary
    to build an adapter to plug a device into a command station from another
    manufacturer.  </p> 

<H2>Supported Hardware</H2>

<H3>Command Stations</H3>

<p>The XPressNet protocol allows the DCC manufacturers that use it to 
select what functionality they wish to provide in thier command stations.
This functionality ranges from "supports all features" to "bare bones 
minimal".  Unfortunatly, this restricts the features you can access via 
JMRI - if the hardware doesn't support it, it isn't there to be used by 
JMRI.</p>

<p>In general, the features that JMRI cares about can be grouped into four
areas - operating locomotives and turnouts on the layout, programming decoders
on a programming track or in ops mode, and getting feedback from the layout
(the state of turnouts, ops-mode feedback, etc).  The following table tries to
show what systems support these features.  System specific limitations 
are also expressed in the <a href=#Limitations>Limitations</a> section of 
this page</p>

<div class=list>
    <dl>
    <dt class=left>Full</dt>
    <dd class=first>
    	<H4><span class=supported>Operating</span>
	    <span class=supported>Programming</span>
	    <span class=supported>Feedback</span>
	</H4>
	<ul>
	    <li> Lenz LZ100 based systems (software version 3.x)</li>
	    <li> Lenz LZV100 based systems (software version 3.x)</li>
	</ul>
    </dd>
    <dt class=left>Partial</dt>
    <dd>

	<h4><span class=supported>Operating</span>
	    <span class=supported>Programming</span>
	    <span class=unsupported>Feedback</span>
	</H4>
	<ul>
	    <li> Roco LocoMaus 2 (Roco Part number 10760) </li>
	</ul>

    </dd>
    <dt class=left>Minimal</dt>
    <dd>
	<h4><span class=supported>Operating</span>
	    <span class=unsupported>Programming</span>
	    <span class=unsupported>Feedback</span>
	</H4>
	<ul>
	    <li> Atlas Commander</li>
	    <li> Lenz Compact</li>
	    <li> Lenz LH200</li>
	    <li>ZTC Controls ZTC511 (with Command Station Software version 4.0)</li>
	</ul>
    </dd>
    <dt class=left>Unknown</dt>
    <dd>
	<h4>These are untested, but should be at least partially supported</h4>
	<ul>
	    <li>ZTC Controls ZTC521 (with XPressNet (aka X-Bus V3.0) software)</li>
	</ul>
    </dd>
    </dl>
</div>

<H3>Computer Interfaces</H3>

    <p>There are four computer interfaces that JMRI has been tested with, and
    developed for
    	<ul>
	<li>The Lenz LI100 is Lenz's original computer interface.  It is
	limited to a serial port speed of 9600 baud.  
	<li>The Lenz LI100F is an improved version of the LI100.  It supports
	serial port speeds of 9600 and 19,200 baud.  The Factory default is
	9600 baud.
	<li>The Lenz LI101F is Lenz's latest serial port based 
	computer interface.  It is significantly different than the LI100 and 
	LI100F in physical apearance, and in the method by which the device is
	configured.  The device is configured via a softwaretool provided 
	by Lenz which runs on Windows only.  We have included a configuration 
	tool with JMRI that will allow users of other operating systems to 
	configure thier LI101F as well.  The LI101F supports serial port 
	speeds of 19,200, 38,400, 57,600, and 115,200 baud.  The factory 
	default is 19,200 baud.
	<li>The Lenz LIUSB is Lenz's first USB based computer interface.
	Internally, the device contains a USB to RS232 serial adapter, and 
	an XPressNet interface circuit similar to that of the LI101F.  The 
	device is configured via a software tool provided by Lenz which 
	runs on Windows Only.
	<li>In addition to the Lenz purpose built computer interfaces, we have
	also included support for using an XPressNet Phone Adapter (XPA) as an
	interface to the an XPressNet based DCC system.  This interface is
	relatively slow, and it only allows controlling mobile and stationary
	decoders, but it may be perfect for someone who is interested in trying
	out the control functions of a computer before deciding to go with a
	full fledged interface. Note that an XPA cannot be used to program decoders!
	
	</ul></p>

<a name=Limitations>
<H2>Limitations</H2>
<div class=list>
    <dl>
    	<dt class=left>JMRI</dt>
	<dd class=first>
	<p>JMRI supports the current version (XBus/XPressNet Version 3.0).  We
	may add XBus Version 1.0 and 2.0 support in the future which will allow
	all XBus based systems to work with JMRI.</p>
	</dd>

	<dt class=left>Atlas</dt>
	<dd>
	<p>The Atlas Commander provides support only for operation of 
	equipment on a layout (running trains and throwing switches)
	from JMRI. You cannot program decoders from a computer with the Commander.</p>

	<p>If you have an Atlas Commander, and would like to use it 
        to control your layout from the computer, an XPA and Hayes 
        Compatible Modem may be a more cost effective solution than the 
	LI100,LI100F,LI101F,or LIUSB</p>

	</dd>

	<dt class=left>Lenz</dt>
	<dd>
	<p>We have a pretty good handle on what instructions each Lenz Command
	station should support. If you find that you cannot perform a function you
	think you should be able to using a Lenz system and the LI100, 
	LI101F or LIUSB, Please let us know.</p>

	<p>LZ100 and LZV100 based systems support the full range of JMRI 
        functionality.  The LZ100 is the command station used in the 
	Set-01.  The LZV100 is the command station used in the Set-90,
	Set-100, and Set-LI.</p>

	<p>The LH200 provides support only for operating equipment on a layout 
	(running trains and throwing switches) from JMRI.  The LH200 is the 
	command station used in the Set-02. You can't program decoders
	from a computer with Set-02.</p>

	<p>The Compact is the same device as the Atlas Commander, and 
	has the same restrictions as the commander.  The Compact is not 
	available in North America. </p>

	<p>If you have either an LH200 or a Compact, and wish to add 
	computer control to your layout, an XPA and Hayes Compatible 
	Modem may be a more cost effective solution than the LI100, 
	LI100F, LI101F, or LIUSB</p>
	
	</dd>
	<dt class=left>Roco</dt>
	<dd>
	<p>The Roco LocoMaus 2 (Roco Part number 10760) has been shown to 
	support operating equipment on a layout (running trains and throwing 
	switches) as well as programming locomotives on the programming 
	track.</p>
	<p>For programming in service mode, the LocoMaus2 appears to only 
	be able to write to CVs.</p>
	<p>It is not known at this point in time if the LocoMaus 2 
	supports Operations Mode Programming.</p>

	<p>The LocoMaus 2 does not support feedback.</p>
	</dd>

	<dt class=left>ZTC</dt>
	<dd>
	<p>The ZTC Controls ZTC511 (with Command Station software 
	version 4.0) has been shown to support operating equipment on a 
	layout (running trains and throwing switches).  At least when 
	using the Lenz LI10x as an interface, the ZTC511 does not
	appear to support any programming operations.</p>

	<p>The ZTC521 (with XBus V3.0 software) has yet to be tested, so 
	the full extent of what is supported is not known at this time.</p>

	<p>The onboard serial interface of the ZTC511 is not supported at 
	this point in time.</p>

	<p>You can use any of the Lenz interfaces listed above to connect 
	to a ZTC system that supports the XPressNet (aka X-Bus V3.0) 
	protocol.</p>

	</dd>
    	<dt class=left>XPA and Hayes Compatible Modem</dt>
	<dd>
	<p>If you choose to use an XPA and a Hayes Compatible Modem to 
	control your XPressNet based system, you will be limited to 
	control of locomotives and accessory decoders.
	You cannot program decoders from a computer using the XPA,
	regardless of which system you have.
	</p>
	</dd>

    </dl>
</div>


<H2>Connecting to an XPressNet based DCC System using a Lenz LI100 or LI101</H2>
<ol>
    <li><p> To connect your computer to one of these XPressNet based DCC systems, you
    need a Lenz LI100 or LI101 interface unit.  Connect one of those units to your
    DCC command station via their XpressNet connections.  Then connect the
    LI100/LI101 to the computer's serial port using a 9-pin serial cable.</p>

    <li><P> Then go to the preferences panel of a JMRI-based program.  This
    opens automatically the first time a program is run, or you can
    select it from the "Edit" menu.  </p>

    <li><P> Select "Lenz LI100/LI101F" from the top selection box. You can
    then select the proper serial port in the second selection box.
    </p>

    <li><P> The baud rate selection box should be set to match your LI100
    or LI101.  From the factory, the LI100 is set to 9600 baud, The
    LI101 is set to 19,200 baud.</p>

    <li><P> The fourth box should be left on "hardware flow control" unless
    you later consistently get a message about the LI100 control leads
    being improperly set up, in which case you might want to try to
    bypass that by selecting "no flow control".</p>

    <li><P> Check Buffer Status when sending?  Should be set to "yes"
    unless you are using MacOS 8 or 9.</P>   

    <li><P> The series of radio buttons labelled "GUI style" allows you to
    select how the program will look.  "Metal" is the native Java look
    available on all types.  Other choices will vary with your computer
    type. "Motif", "Windows", "MacOS" and "MacOS Adaptive" look native
    on Linux, Windows, MacOS "Classic" and MacOS X respectively.</p>

    <li><P> In the bottom selection box, you can pick the default
    programmer format. You can override this each time you open the
    programmer, so this is here just for convenience.</p>

    <li><P> Click "Save".  You'll be asked if it's OK for the program to
    quit, click "Yes".</p>

    <li><P> Restart the program. You should be up and running.</p>
</ol>
<html>
<H2>Connecting to an XPressNet based DCC System using a Lenz LIUSB</H2>
<ol>
    <li><p> To connect your computer to one of these XPressNet based DCC
    systems, you can use a Lenz LIUSB interface unit.  Connect the LIUSB 
    to your DCC command station via their XpressNet connections.  Then
    connect the LIUSB to your computer's USB port using the supplied
    cable.</p>

    <li><P> In order to use the LIUSB with JMRI, you must first install a
    software driver on your computer.  Internally, the device contains a
    FTDI FT232BM USB to Serial converter.  There are two drivers available
    for this device, make sure you obtain the Virtual Comm Port (VCP)
    driver.</P>

    <P> The device drivers for Windows are included on the CD that
    comes with the device.</p>

    <p> The device drivers for Linux are included with recent versions of
    the Linux kernel</p>

    <p> Device drivers for Linux, and MacOS (8,9 and X ) and Windows are
    available from the <a href="http://www.ftdichip.com/">FTDI  website</a>.
    (A direct link to the drivers that is current as of this writing is <a 
    href="http://www.ftdichip.com/Drivers/FT232-FT245Drivers.htm">http://www.ftdichip.com/Drivers/FT232-FT245Drivers.htm</a>)
    </P>

    <P> When the device drivers are installed, and the LIUSB is connected
    to both your PC and your DCC system, the LIUSB should have a Red
    LED turned on, indicating the XPressNet connection is OK, and a green 
    LED turned on, indicating the USB connection is OK.</P>

    <li><P>NOTE: If you have installed the Lenz software, make sure none
    of it is running.  This includes the LI-Server, which may be running
    in the background.</P>

    <li><P> Once the drivers are installed, you are ready to configure
    JMRI.  Start one of the JMRI-based programs, Then go to the
    preferences panel. This opens automatically the first time a program
    is run, or you can select it from the "Edit" menu.  </p>

    <li><P> Select "Lenz LIUSB" from the top selection box. You can
    then select the proper serial port in the second selection box.
    </p>
    
    <li><P> The baud rate selection box should be set to 57,600 baud.</p>
    
    <li><P> The fourth box should be left on "hardware flow control"
    unless you later consistently get a message about the LIUSB control
    leads being improperly set up, in which case you might want to try to
    bypass that by selecting "no flow control".</p>

    <li><P> Check Buffer Status when sending?  Should be set to "yes"
    unless you are using MacOS 8 or 9.</P>

    <li><P> The series of radio buttons labelled "GUI style" allows you to
    select how the program will look.  "Metal" is the native Java look
    available on all types.  Other choices will vary with your computer
    type. "Motif", "Windows", "MacOS" and "MacOS Adaptive" look native
    on Linux, Windows, MacOS "Classic" and MacOS X respectively.</p>

    <li><P> In the bottom selection box, you can pick the default
    programmer format. You can override this each time you open the
    programmer, so this is here just for convenience.</p>

    <li><P> Click "Save".  You'll be asked if it's OK for the program to  
    quit, click "Yes".</p>

    <li><P> Restart the program. You should be up and running.</p>
</ol>
</html>

<H2>Connectiong to an XPressNet based DCC System using the XPA and a modem</H2>

<p>We have developed an alternative method for connecting to an XPressNet based
   system which should prove to be more cost effective on XPressNet based
   systems that do not support programming or feedback via the LI100, LI100F, or
   LI101F computer interfaces, or for those who are interested in experimenting
   with computer control, but don't need all the features supported by the Lenz
   interfaces.</p>

<p>This system uses the Lenz XPressNet Phone Adapter and a Hayes Compatible
   modem to provide control of locomotives and stationary decoders. </p>

<ol>
    <li> Connect your computer to a Hayes Compatible modem - either a built-in
    	modem card or an external serial modem.

    <li> Next, Connect the "Phone In" jack on your XPA to the "Wall In" jack 
	on your modem using the cable supplied with the XPA for connecting a 
	telephone to the XPA.

    <li>Then go to the preferences panel of a JMRI-based program. This opens
    automatically the first time a program is run, or you can select it from
    the "Edit" menu.

    <li>Select "XPA-Modem" from the top selection box. You can then select the
    proper serial port in the second selection box.

    <li>The baud rate selection box should default to 9600 baud. At this point
    in time, this can not be changed.

    <li>The series of radio buttons labelled "GUI style" allows you to select
    how the program will look. "Metal" is the native Java look available on all
    types. Other choices will vary with your computer type. "Motif", "Windows",
    "MacOS" and "MacOS Adaptive" look native on Linux, Windows, MacOS "Classic"
    and MacOS X respectively.

    <li>In the bottom selection box, you can pick the default programmer
    format. You can override this each time you open the programmer, so this is
    here just for convenience.

    <li>Click "Save". You'll be asked if it's OK for the program to quit, click "Yes".

    <li>Restart the program. You should be up and running.
</ol>

<H2>Documentation</H2>
<ul>
    <li><H3>Off Site Documentation</H3>
	<ul>
    		<li><a href="http://www.atlasrr.com/dcc/CommanderManual1.pdf">Atlas Commander Manual</a>
                (pdf file; 363 kb)</li>

    		<li><a href="http://www.atlasrr.com/dcc/Atlas_Commander_Consisting.doc">Atlas
        	Commander Consisting Instructions</a> (not included in the above manual; Word doc.)</li>

    		<li><a href="http://www.lenz.com/manuals/index.htm">Lenz Product Manuals</a></li>

    		<li><a href="http://www.lenz.com/techinfo/index.htm">Lenz XpressNet Documentation</a></li>
	</ul></li><br>
    <li><H3>JMRI Documentation</H3>
	<ul>
    		<li><a href=XNetAddressing.html>Lenz Feedback bus Addresses</a> 
    		<li><a href=CreateXNetLogFile.html>How To Create an XPressNet Log file</a>
	</ul>
</ul>

    <h2>XPressNet Specific Tools</h2>
    <p> The following XPressNet Specific Tools are provided as part of the JMRI
    package (click on the name for mor information) </p>
    <ul>

	<li> <a href=LZV100Configurationtool.html>LZV100 Configuration Tool</a>
	- This is a tool to configure the LZV100 command and power station via
	  software
	<li> <a href=LI101Configurationtool.html>LI101 Configuration Tool</a> -
	This tool configures the LI101 computer interface via software

	<li> <a href=XNetSystemInformationtool.html>XPressnet System
	Information</a> - This tool obtains the software version and type of
	the command station and the Software version of the LI100/LI100F/LI101F
	connected to the computer.
    </ul>


<hr class="hide">
<!-- Footer -->
    <hr class="hide">
    <div id="footer">
	<ul id="bn">
	<li><a href="/sitemap/">Site Map</a></li>
	<li><a href="/contact/">Contact Us</a></li>
	</ul>

	<p>Thanks and congratulations to
	   <A href="/community/" title="Who is JMRI">
	   	all who contributed</A>! </p>

	<p>Copyright &copy; 1997 - 2004 JMRI Community. 
	<P>JMRI, DecoderPro, PanelPro, DispatcherPro and associated logos are our trademarks.
	<P><A href="/Copyright.html">Additional information on copyright, trademarks and licenses is linked here.</a></p>
    
       <BR/>Site hosted by: <BR/>
        <A href="http://sourceforge.net"> 
        <IMG src="http://sourceforge.net/sflogo.php?group_id=26788&amp;type=1" width="88" height="31" border="0" alt="SourceForge Logo"> </A> 


    </div>
<!-- /Footer -->

</div><!-- closes #mainContent-->
</div> <!-- closes #mBody-->
</div> <!-- closes #container -->
</body>
</html>

