<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="Bob Jacobsen, LBL">
   <meta name="GENERATOR" content="Mozilla/4.75C-CCK-MCD {C-UDP; EBM-APPLE} (Macintosh; U; PPC) [Netscape]">
   <meta name="Content-Type" content="text/html; charset=iso-8859-1">
   <title>LocoNet Addressing</title>
</head>
<body>


<IMG SRC="../../images/logo.gif" ALIGN=RIGHT WIDTH="160" HEIGHT="135" HSPACE="0" VSPACE="0">
<h1>LocoNet addressing</h1>

LocoNet systems address input sensors and output turnouts using numbers.
This page talks about how those numbers are defined in JMRI, and how they relate
to the numbers in other systems.

<h2>Addressing LocoNet turnouts in JMRI</h2>

Inside packets on the LocoNet, output turnouts are addressed with numbers from 0 to 4095.
Throttles, however, address these with numbers from 1 to 4096. To avoid user
confusion, JMRI uses the same numbering as the throttles:  LT1 to LT4096.
<P>
Note that when the LocoNet monitor panel shows the contents of the LocoNet packets
in text, it uses the same addressing, hence
1 to 4096.  This is then 
different from the raw bytes that are displayed, but
at least it's consistent with what users expect to see.
We agree that's confusing, but there has to be some confusion somewhere, given
the way this was set up.

<h2>Addressing LocoNet sensors in JMRI</h2>

Inside packets on the LocoNet, sensors are addressed with numbers from 0 to 4095.
Digitrax documentation refers to these as 1 to 4096, however.  Just like
turnouts, we use the documentation numbering to define the sensor names: LS1 to LS4096.
<P>
The simplest way to find the 
right number for a given block is to open a "LocoNet monitor" window, and drop a 
locomotive onto the block you're interested in.  You'll see the 
LocoNet message, complete with number, in the window that looks 
something like this:
<PRE>
   General sensor input report: contact 161 (DS54 switch 81 Aux input) (BDL16 11,1) is Hi 
</PRE>
The contact number, 161 in this case, is the address of the sensor.
Prefix that with LS that to get the sensor name, e.g. LS161 in this case.
<P>

<h2>Addressing Transponding in JMRI</h2>

Digitrax transponding is handled via the Reporter mechanism
in JMRI.  Reporters gather information from the layout and make it
available when it changes.
<P>
The transponding zones are numbered sequentially from 1, so that
1 through 4 are on the 1st BDL16, etc.

<HR>
<BR>Site hosted by: <BR>
<A href="http://sourceforge.net"> 
<IMG src="http://sourceforge.net/sflogo.php?group_id=26788&type=1" width="88" height="31" border="0" alt="SourceForge Logo"> </A>
 

<script language=javascript 
src="http://ss.webring.com/navbar?f=j;y=bob_jacobsen15;u=100088115910095949">
</script><noscript><center>
<table bgcolor=gray cellspacing=0 border=2 bordercolor=red><tr>
<td><table cellpadding=2 cellspacing=0 border=0><tr><td align=center>
<font face=arial size=-1>This site is a member of WebRing. 
<br>To browse visit <a href="http://ss.webring.com/navbar?f=l;y=bob_jacobsen15;u=100088115910095949">
Here</a>.</font></td></tr></table></td></tr></table>
</center></noscript>

<hr>
Bob Jacobsen<BR>
jake@physics.berkeley.edu

</body>
</html>
