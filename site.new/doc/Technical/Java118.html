<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<!-- $Id: Java118.html,v 1.10 2007-07-06 20:04:11 jacobsen Exp $ -->
<html lang="en">
<head>
    <TITLE>
 	JMRI: Java 1.1.8 Compatibility
    </TITLE>
    <META content="Bob Jacobsen" name=Author>
    <meta name="keywords" content="JMRI technical code Java 1 1.1.8 ">

    <!-- The combination of "Define" and {Header,Style, Logo and Footer} comments -->
    <!-- are an arbitrary design pattern used by the update.pl script to -->
    <!-- easily replace the common header/footer code for all the web pages -->

    <!-- delete the following 2 Defines if you want to use the default JMRI logo -->
    <!-- or change them to reflect your alternative logo -->

<!-- Style -->
  <META http-equiv=Content-Type content="text/html; charset=iso-8859-1">
  <link rel="stylesheet" type="text/css" href="/css/default.css" media="screen">
  <link rel="stylesheet" type="text/css" href="/css/print.css" media="print">
  <link rel="icon" href="/images/jmri.ico" type="image/png">
  <link rel="home" title="Home" href="/">
<!-- /Style -->
</head>


    <p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>

<!-- Header -->
    <div id="header">
	<!-- Logo -->
	<a href="/" title="Return to home page" accesskey="1">
	    <img src="/images/logo-jmri.gif" width="160" height="135" alt="JMRI Logo"> </a>
	<!-- /Logo -->
	<ul id="mainNav"> <!-- Top tool bar -->
	   <li><a href="/download/"  title="Get the latest software">Download</a></li>
	   <li><a href="/apps/"      title="Learn about JMRI applications">Applications</a></li>
	   <li><a href="/hardware/"  title="What hardware does JMRI support">Hardware</a></li>
	   <li><a href="/doc/Manual/"   title="Trouble-shooting, and FAQs">Manual</a></li>
	   <li><a href="/doc/Technical/" title="Developing and extending JMRI">Developers</a></li>
	   <li><A href="/community/" title="Who is JMRI">Acknowledgements</a></li>
	</ul>

	<div id="searchform"> <!--  Search Form -->
	  <form id="search" method="get" action="http://www.google.com/custom">
	     <label for="q" title="Search JMRI.SourceForge.net">search JMRI: </label>
	     <input type="hidden" name="cof" value="LW:200;LH:95;L:http://JMRI.sourceforge.net/images/logo.gif;GIMP:#cc0000;T:black;ALC:#0000ff;GFNT:grey;LC:#990000;BGC:white;AH:center;VLC:purple;GL:0;GALT:#666633;AWFID:9262c37cefe23a86;">
	    <input type="hidden" name="domains" value="JMRI.sourceforge.net">
	    <input type="hidden" name="sitesearch" value="JMRI.sourceforge.net">
	    <input type="text" id="q" name="q" accesskey="s" size="30">
	    <input type="submit" id="submit" value="go">
	  </form>
       </div> <!--  End #searchform -->
    </div> <!-- closes #header-->
<!-- /Header -->

<!-- Sidebar -->
<!-- This is the common sidebar definition for Technical (developer) pages -->
    <hr class="hide">

    <div id="mBody">

	<div id="side"> <!-- Block of text on left side of page -->
	    <div style="text-align: center">Info on JMRI:</div>
	    <dl>

		<dt>Development tools</dt>
		<dd>
			<ul>
			<LI><a href="getcode.html">Getting the code via CVS</a>
			<LI><a href="CVSFAQ.html">CVS FAQs</a>
			<LI><a href="Ant.shtml">Building with Ant</a>
			<LI><a href="NetBeans.html">Building with NetBeans</a>
			<LI><a href="XCode.html">Building with XCode</a>
			<LI><a href="Eclipse.html">Building with Eclipse</a>
			<LI><a href="JBuilder.html">Building with JBuilder</a>
			</ul>
		</dd>

		<dt>Code Structure</dt>
		<dd>
			<ul>
			<LI><a href="IntroStructure.html">Introduction</a>
			<LI><a href="AppStructure.html">Application Structure</a>
			<LI><a href=""></a>
			<LI><a href="../../JavaDoc/doc">JavaDocs</a><ul>
				<LI><a href="../../JavaDoc/doc/index-all.html">Name Index</a>
				<LI><A HREF="../../JavaDoc/doc/index.html">Packages</A>
				<LI><A HREF="../../JavaDoc/doc/allclasses-frame.html">Class heirarchy</A>
				</UL>
			<LI><a href="Threads.html">Threads</a>
			<LI><a href="XmlPersistance.html">Xml Persistance</a>
			</ul>
		</dd>

		<dt>Techniques and Standards</dt>
		<dd>
			<ul>
			<LI><a href="RP.html">Recommended Practices</a>
			<LI><a href="I8N.html">Internationalization</a>
			<LI><a href="Logging.html">Logging &amp; Error Handling</a>
			<LI><a href="Java118.html">Working with Java 1.1.8</a>
			<LI><a href="JUnit.html">Unit testing with JUnit</a>
			<LI><a href="Help.html">Providing help with JavaHelp</a>
			</ul>
		</dd>

		<dt>How To</dt>
		<dd>
			<ul>
			<LI><a href="NewType.html">Add a New Type</a>
			<LI><a href="plugins.html">Extend with Plugins</a>
			</ul>
		</dd>

	    </dl>
	</div>
<!-- /Sidebar -->

	<div id="mainContent">

		    <H1>JMRI: Java 1.1.8 Compatibility</H1>

This page talks about technical aspects of Java version 1.1.8 and
JMRI.

<P>
Macintosh computers running MacOS versions less than MacOS X (e.g.
MacOS 8.6, MacOS 9) have only Java version 1.1.8 available.  We therefore
keep the JMRI libraries as consistent as possible with that version of
Java.  This page talks about what that means.

<h2>Achieving compatibility</h2>

"Some code is born compatible, some achieve compatibility, 
and some have compatibility thrust upon them"
<P>
Things to consider:
<OL>
<LI>Use the Swing 1.1 member names
<LI>Use the 1.1 collections.  In particular:
	<UL>
	<li><code>import com.sun.java.util.collections.*;</code>
	<LI>Use <code>elementAt(int)</code>, not <code>get(int)</code>
	</UL>
<LI>Some functions that are not available are
handled in the jmri.util package.  If you get a compile
error due to a missing method while using the "check" target
(see below), look in jmri.util for a class/method that will 
provide the same function for you.
<LI>Note that named innner classes do not have unlimited access
to the outer class members in Java 1.1.  For example, if you have
a class Inner declared within a class Outer, the methods and members
of the Outer object will have to be referenced as Outer.this.foo in 
many cases.
</OL>

<h2>Testing compatibility</h2>
The Ant configuration file "check.xml" contains several targets:
<DL>
<DT>compile<DD>Does a special compilation targeting the special needs of the
1.1.8 JVM:
<OL>
<LI>Compile several files from the jmri.util package that must be compiled
with Java 1.3 libraries.
<LI>Use the "synchlist.csh" script to create an Ant file containing
instructions to compile the files that need the "classic" compiler.  These
are compiled against the 1.1.8 library jar files.
<LI>Compile the remaing source files with the default (modern) compiler, using the
1.1.8 library jar files.
<LI>Complete the normal build process by copying properties files, etc.
</OL>
Compiling against the 1.1.8 jar files is done to ensure that only
methods present in the 1.1.8 libraries are used during the compilation.  
The few files in the jmri.util package that are allowed to use
more modern methods also have extensive try/catch exception handling
around those method invocations.
<DT>check<DD>The main target, this does clears the existing build,
then recompiles the src and test directories as needed for JVM 1.1.8,
and then runs alltest.
</DL>

<!-- Footer -->
    <hr class="hide">
    <div id="footer">
	<ul id="bn">
	<li><a href="/sitemap/">Site Map</a></li>
	<li><a href="/contact/">Contact Us</a></li>
	</ul>

	<p>Thanks and congratulations to
	   <A href="/community/" title="Who is JMRI">
	   	all who contributed</A>! </p>

	<p>Copyright &copy; 1997 - 2004 JMRI Community. 
	<P>JMRI, DecoderPro, PanelPro, DispatcherPro and associated logos are our trademarks.
	<P><A href="/Copyright.html">Additional information on copyright, trademarks and licenses is linked here.</a></p>
    
       <BR/>Site hosted by: <BR/>
        <A href="http://sourceforge.net"> 
        <IMG src="http://sourceforge.net/sflogo.php?group_id=26788&amp;type=1" width="88" height="31" border="0" alt="SourceForge Logo"> </A> 


    </div>
<!-- /Footer -->

	  </div><!-- closes #mainContent-->
	</div> <!-- closes #mBody-->
</body>
</html>
