<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<!--

  $Id: package.html,v 1.1 2010-01-25 00:59:55 jacobsen Exp $

  Made with permission from the Sun version at
  http://java.sun.com/j2se/javadoc/writingdoccomments/package-template

  Copyright 2003

-->
</head>
<body bgcolor="white">

The JMRI XML I/O package allows communications to and from a
running JMRI program through the exchange of XML-format information.

<p>
Serialization of the XML is done elsewhere, as this package
works via the exchange of JDOM Element objects.

<p>
Both synchronous reads and writes, and asynchronous 
read and monitor operations are available.

<p>
The {@link jmri.web.xmlio.XmlIOFactory} class provides {@link jmri.web.xmlio.XmlIOServer} objects, which 
handle the interactions.  Each XmlIOServer is independent and
thread safe.

<p>
The XML schema is defined in the xmlio.xsd schema document.
A typical message is 
<code><pre>
&lt;xmlio&gt;
    &lt;item&gt;
        &lt;type&gt;turnout&lt;/type&gt;
        &lt;name&gt;Turnout 12&lt;/name&gt;
        &lt;value&gt;4&lt;/value&gt;
    &lt;/item&gt;
    &lt;item&gt;
        &lt;type&gt;sensor&lt;/type&gt;
        &lt;name&gt;IS34&lt;/name&gt;
    &lt;/item&gt;
&lt;/xmlio&gt;
</pre></code>

<p>
A synchronous request completes immediately, having made
any changes needed and returning current values.
<p>
The presence of a &lt;value&gt; element indicates a write;
the returned element will have the current value inserted
and new value elements created as needed.
<p>
All writes are done before the values are collected for any reads,
but there is no guarantee that the consequences of the writes
have propagated completely.

<p>
An asynchronous request does not do a write.
Instead, it returns immediately iff 
any object has a value different from its value element.  
Otherwise,
it returns when any values for any of the items 
changes.  All values are provided; because of the asynchronous
nature there may be more than one change recorded.

<p>
By sending an Element back and forth as an asynchronous request,
a client may reliably get <em>all</em> changing values
without risk of losing changes that occur while elements are
in transmission.  Just send an element containing references to, but
not values for, all interesting objects, and then keep turning it
around as an asynchronous request.

<p>
A &lt;list&gt; element returns all existing objects of a 
given type as a list of &lt;item&gt; elements. 
This can then be turned
around to start a sequence of read and monitor operations.

<code><pre>
&lt;xmlio&gt;
    &lt;list&gt;
        &lt;type&gt;turnout&lt;/type&gt;
    &lt;/list&gt;
&lt;/xmlio&gt;

</pre></code>

<h2>Related Documentation</h2>

@see org.jdom.Element

@since 2.7.1

</body>
</html>
