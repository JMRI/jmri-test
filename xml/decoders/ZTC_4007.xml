<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="../XSLT/decoder.xsl"?>

<!-- Copyright (C) JMRI 2007 All rights reserved -->
<!-- $Id: ZTC_4007.xml,v 1.4 2010-01-28 07:34:52 jacobsen Exp $ -->
<!--                                                                        -->
<!-- JMRI is free software; you can redistribute it and/or modify it under  -->
<!-- the terms of version 2 of the GNU General Public License as published  -->
<!-- by the Free Software Foundation. See the "COPYING" file for a copy     -->
<!-- of this license.                                                       -->
<!--                                                                        -->
<!-- JMRI is distributed in the hope that it will be useful, but WITHOUT    -->
<!-- ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or  -->
<!-- FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License  -->
<!-- for more details.                                                      -->

<decoder-config
    xmlns:xi = "http://www.w3.org/2001/XInclude"
    xmlns:xsi = "http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation = "http://jmri.org/xml/schema/decoder.xsd"
>
		<version author="John Bicknell" version="2" lastUpdated="20081501"/>
		<version author="Ian Birchenough" version="1" lastUpdated="20072009"/>
<decoder>
	<family name="ZTC 4007" mfg="ZTC" lowVersionID="0" highVersionID="0">
		<model model="ZTC 4007" numOuts="3" numFns="5" />
	</family>

	<programming direct="yes" paged="yes" 
	                     register="yes" ops="yes"></programming>

	<variables>
		<variable label="Primary Address" CV="1" comment="Short address"
						item="Short Address"  default="03">
			<shortAddressVal/></variable>
		<variable label="Vstart" CV="2"
						comment="A value of 255 corresponds to 100%">
			<decVal/></variable>
		<variable label="Acceleration Rate" CV="3"
						item="Accel" default="1">
			<decVal max="31"/></variable>
		<variable label="Deceleration Rate" CV="4"
						item="Decel" default="1">
			<decVal max="31"/></variable>

		<variable label="Vhigh" CV="5" default="0" >					<decVal/></variable>

		<variable label="Vmid" CV="6" default="0" >					<decVal/></variable>

		<variable label="Manufacturer Version No: " CV="7" readOnly="yes"
						item="Decoder Version"><decVal/></variable>

		<variable label="Manufacturer ID: " CV="8"
						item="Manufacturer" default="132">			<decVal/></variable>

		<variable label="Decoder RESET:" CV="8" 
						item="Reset" default="132">			<decVal/></variable>

		<variable label="Decoder Reset" CV="8"
					item="resetbit" >
			<enumVal>
				<enumChoice choice="No" />
				<enumChoice choice="Yes" value="8" />
			</enumVal>
		</variable>

		<variable label="Total PWM Period" CV="9" default="1" 
			tooltip="Sets motor drive frequency. Range=0 to 255. Low value=large motor; High value=coreless motors">
		<decVal/></variable>

		<variable label="Packet Time-out Value" CV="11" default="100" 
			tooltip="Delay on no DCC x 0.01 sec before switching to DC mode">	<decVal/></variable>

		<variable label="DC Conversion Available (Read Only)" CV="12" readOnly="yes" item="Analog" default="1"> 	<decVal/></variable>

		<variable label="Alternate Function Status" CV="14" default="3" item="alt function" > <decVal/></variable>
			
		<variable label="Extended Address" CV="17"
						item="Long Address" >
			<longAddressVal/></variable>
			
		<variable label="Speed Table/Mid Range Cab Speed Step" CV="25" default="100"
				comment="See RP 9.2.2 for more information. Values from 2 to 127 indicate preloaded speed tables. 0 or 1 means not used.  Values between 128 and 154 define the cab throttle position where the mid range decoder speed value is applied">
				<decVal/></variable>

		<variable label="Decoder Automatic Stopping Configuration" CV="27" default="3"
				comment="Allows Automatic stop on detection of Assymetric signal 
						0=Disable, 1=Right Rail, 2= Left Rail, 3= Both Rails">
			<enumVal>
				<enumChoice choice="Disable"/>
				<enumChoice choice="Enable stop when Right Rail has +ve asymetric signal"/>
				<enumChoice choice="Enable stop when Left Rail has +ve asymetric signal"/>
				<enumChoice choice="Enable stop when either Rail has +ve asymetric signal"/>
			</enumVal>
		</variable>

		<variable label="ZTC Talkback Configuration" CV="28" item="talkbackconfig"
				comment="Used to configure ZTC Talkback 
					0= Talkback OFF, 1= Constant Broadcast, 2= Broadcast on detection of Asymetric Signal">
			<enumVal>
				<enumChoice choice="Disabled"/>
				<enumChoice choice="Constant Broadcast" value="1" />
				<enumChoice choice="Broadcast on Asymetric Signal" value="2" />
			</enumVal>
		</variable>

		<variable label="Locomotive Direction" CV="29" default="0" mask="XXXXXXXV">
			<enumVal>
				<enumChoice choice="normal"/>
				<enumChoice choice="reversed"/>
			</enumVal>
		</variable>

		<variable label="Speed Steps" CV="29" default="1" mask="XXXXXXVX"
					item="Speed Step Mode" >
			<enumVal>
				<enumChoice choice="14 speed step format"/>
				<enumChoice choice="28 speed step format"/>
				</enumVal></variable>

		<variable label="Power Source Conversion" CV="29" default="0" mask="XXXXXVXX"
					item="Analog (DC) Operation" >
			<enumVal>
				<enumChoice choice="NMRA Digital only"/>
				<enumChoice choice="DC conversion enabled"/>
				</enumVal>
		</variable>
		
		<variable label="ZTC Talkback" CV="29" default="0" mask="XXXXVXXX"
					item="ZTC Talkback">
			<enumVal>
				<enumChoice choice="Disabled"/>
				<enumChoice choice="Enabled"/>
			</enumVal>
		</variable>

		<variable label="Speed Table Definition" CV="29" default="0" mask="XXXVXXXX">
			<enumVal>
				<enumChoice choice="Use Vstart, Vmid, Vhigh"/>
				<enumChoice choice="Use table in CVs 66 through 95"/>
				</enumVal></variable>
		<variable label="Address Format" CV="29" default="0" mask="XXVXXXXX">
			<enumVal>
				<enumChoice choice="One byte (short) address"/>
				<enumChoice choice="Two byte (extended) address"/>
				</enumVal></variable>

		<variable label="F0(f) controls output 1" CV="33" mask="XXXXXXXV"
			item="FL(f) controls output 1" default="1" minOut="1" minFn="0">
			<enumVal> <enumChoice choice="No"/>	<enumChoice choice="Yes"/> </enumVal>
		</variable>
		<variable label="F0(f) controls output 2" CV="33" mask="XXXXXXVX"
			item="FL(f) controls output 2" default="0" minOut="2" minFn="0">
			<enumVal> <enumChoice choice="No"/>	<enumChoice choice="Yes"/> </enumVal>
		</variable>
		<variable label="F0(f) controls output 3" CV="33" mask="XXXXXVXX"
			item="FL(f) controls output 2" default="0" minOut="2" minFn="0">
			<enumVal> <enumChoice choice="No"/>	<enumChoice choice="Yes"/> </enumVal>
		</variable>

		<variable label="F0(r) controls output 1" CV="34" mask="XXXXXXXV"
			item="FL(r) controls output 1" default="0" minOut="1" minFn="0">
			<enumVal> <enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal>
		</variable>
		<variable label="F0(r) controls output 2" CV="34" mask="XXXXXXVX"
			item="FL(r) controls output 2" default="1" minOut="2" minFn="0">
			<enumVal> <enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal>
		</variable>
		<variable label="F0(r) controls output 3" CV="34" mask="XXXXXVXX"
			item="FL(r) controls output 2" default="0" minOut="2" minFn="0">
			<enumVal> <enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal>
		</variable>


		<variable label="F1 controls output 1" CV="35" mask="XXXXXXXV" default="0" minOut="1" minFn="1"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F1 controls output 2" CV="35" mask="XXXXXXVX" default="0" minOut="2" minFn="1"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F1 controls output 3" CV="35" mask="XXXXXVXX" default="1" minOut="3" minFn="1"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>

		<variable label="F2 controls output 1" CV="36" mask="XXXXXXXV" minOut="1" minFn="2"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F2 controls output 2" CV="36" mask="XXXXXXVX" minOut="2" minFn="2"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F2 controls output 3" CV="36" mask="XXXXXVXX" minOut="3" minFn="2"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F2 controls output 4" CV="36" mask="XXXXVXXX" default="1" minOut="3" minFn="2"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>

		<variable label="F3 controls output 1" CV="37" mask="XXXXXXXV" minOut="1" minFn="3"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F3 controls output 2" CV="37" mask="XXXXXXVX" minOut="2" minFn="3"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F3 controls output 3" CV="37" mask="XXXXXVXX" minOut="3" minFn="3"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F3 controls output 4" CV="37" mask="XXXXVXXX"  minOut="3" minFn="3"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>
		<variable label="F4 controls output 5" CV="37" mask="XXXVXXXX" default="1" minOut="3" minFn="3"> <enumVal> 
			<enumChoice choice="No"/> <enumChoice choice="Yes"/> </enumVal> </variable>


		<variable label="Auto Stopping Distance" CV="48" tooltip="0 = None; 255=max"
				comment="Sets the constant Braking Distance for auto stopping 0-255">
				<decVal/></variable>	


		<variable label="Output 1 effect generated" CV="49" mask="XXVVVVVV" minOut="3">
			<enumVal>
				<enumChoice choice="Output is ON or OFF"/>
				<enumChoice choice="On/Off 8 times per second"/>
				<enumChoice choice="On/Off 3.5 times per second"/>
				<enumChoice choice="On/Off 2.5 times per second"/>
				<enumChoice choice="On/Off 2 times per second"/>
				<enumChoice choice="On/Off every second"/>
				<enumChoice choice="On/Off every 2 seconds"/>
				<enumChoice choice="On/Off every 4 seconds"/>
				<enumChoice choice="On for 0.05 seconds then Off"/>
				<enumChoice choice="On for 0.1 seconds then Off"/>
				<enumChoice choice="On for 0.2 seconds then Off"/>
				<enumChoice choice="On for 0.3 seconds then Off"/>
				<enumChoice choice="On for 0.4 seconds then Off"/>
				<enumChoice choice="On for 0.5 seconds then Off"/>
				<enumChoice choice="On for 0.6 seconds then Off"/>
				<enumChoice choice="On for 0.7 seconds then Off"/>
				<enumChoice choice="On for 0.8 seconds then Off"/>
				<enumChoice choice="On for 0.9 seconds then Off"/>
				<enumChoice choice="On for 1 second then Off"/>
				<enumChoice choice="Dim Level 1. This is the dimmest setting" />
				<enumChoice choice="Dim Level 2." />
				<enumChoice choice="Dim Level 3." />
				<enumChoice choice="Dim Level 4." />
				<enumChoice choice="Dim Level 5." />
				<enumChoice choice="Dim Level 6." />
				<enumChoice choice="Dim Level 7." />
				<enumChoice choice="Dim Level 8." />
				<enumChoice choice="Dim Level 9." />
				<enumChoice choice="Dim Level 10." />
				<enumChoice choice="Dim Level 11." />
				<enumChoice choice="Dim Level 12." />
				<enumChoice choice="Dim Level 13." />
				<enumChoice choice="Dim Level 14." />
				<enumChoice choice="Dim Level 15." />
				<enumChoice choice="Dim Level 16. This is the brightest setting" />
				<enumChoice choice="Mars effect" />
				<enumChoice choice="Beacon effect" />
				<enumChoice choice="Flame effect" />
				<enumChoice choice="Ashpan effect" />
			</enumVal>
		</variable>

		<variable label="Output 2 effect generated" CV="50" mask="XXVVVVVV" minOut="3">
			<enumVal>
				<enumChoice choice="Output is ON or OFF"/>
				<enumChoice choice="On/Off 8 times per second"/>
				<enumChoice choice="On/Off 3.5 times per second"/>
				<enumChoice choice="On/Off 2.5 times per second"/>
				<enumChoice choice="On/Off 2 times per second"/>
				<enumChoice choice="On/Off every second"/>
				<enumChoice choice="On/Off every 2 seconds"/>
				<enumChoice choice="On/Off every 4 seconds"/>
				<enumChoice choice="On for 0.05 seconds then Off"/>
				<enumChoice choice="On for 0.1 seconds then Off"/>
				<enumChoice choice="On for 0.2 seconds then Off"/>
				<enumChoice choice="On for 0.3 seconds then Off"/>
				<enumChoice choice="On for 0.4 seconds then Off"/>
				<enumChoice choice="On for 0.5 seconds then Off"/>
				<enumChoice choice="On for 0.6 seconds then Off"/>
				<enumChoice choice="On for 0.7 seconds then Off"/>
				<enumChoice choice="On for 0.8 seconds then Off"/>
				<enumChoice choice="On for 0.9 seconds then Off"/>
				<enumChoice choice="On for 1 second then Off"/>
				<enumChoice choice="Dim Level 1. This is the dimmest setting" />
				<enumChoice choice="Dim Level 2." />
				<enumChoice choice="Dim Level 3." />
				<enumChoice choice="Dim Level 4." />
				<enumChoice choice="Dim Level 5." />
				<enumChoice choice="Dim Level 6." />
				<enumChoice choice="Dim Level 7." />
				<enumChoice choice="Dim Level 8." />
				<enumChoice choice="Dim Level 9." />
				<enumChoice choice="Dim Level 10." />
				<enumChoice choice="Dim Level 11." />
				<enumChoice choice="Dim Level 12." />
				<enumChoice choice="Dim Level 13." />
				<enumChoice choice="Dim Level 14." />
				<enumChoice choice="Dim Level 15." />
				<enumChoice choice="Dim Level 16. This is the brightest setting" />
				<enumChoice choice="Mars effect" />
				<enumChoice choice="Beacon effect" />
				<enumChoice choice="Flame effect" />
				<enumChoice choice="Ashpan effect" />
			</enumVal>
		</variable>

		<variable label="Output 3 effect generated" CV="51" mask="XXVVVVVV" minOut="3">
			<enumVal>
				<enumChoice choice="Output is ON or OFF"/>
				<enumChoice choice="On/Off 8 times per second"/>
				<enumChoice choice="On/Off 3.5 times per second"/>
				<enumChoice choice="On/Off 2.5 times per second"/>
				<enumChoice choice="On/Off 2 times per second"/>
				<enumChoice choice="On/Off every second"/>
				<enumChoice choice="On/Off every 2 seconds"/>
				<enumChoice choice="On/Off every 4 seconds"/>
				<enumChoice choice="On for 0.05 seconds then Off"/>
				<enumChoice choice="On for 0.1 seconds then Off"/>
				<enumChoice choice="On for 0.2 seconds then Off"/>
				<enumChoice choice="On for 0.3 seconds then Off"/>
				<enumChoice choice="On for 0.4 seconds then Off"/>
				<enumChoice choice="On for 0.5 seconds then Off"/>
				<enumChoice choice="On for 0.6 seconds then Off"/>
				<enumChoice choice="On for 0.7 seconds then Off"/>
				<enumChoice choice="On for 0.8 seconds then Off"/>
				<enumChoice choice="On for 0.9 seconds then Off"/>
				<enumChoice choice="On for 1 second then Off"/>
				<enumChoice choice="Dim Level 1. This is the dimmest setting" />
				<enumChoice choice="Dim Level 2." />
				<enumChoice choice="Dim Level 3." />
				<enumChoice choice="Dim Level 4." />
				<enumChoice choice="Dim Level 5." />
				<enumChoice choice="Dim Level 6." />
				<enumChoice choice="Dim Level 7." />
				<enumChoice choice="Dim Level 8." />
				<enumChoice choice="Dim Level 9." />
				<enumChoice choice="Dim Level 10." />
				<enumChoice choice="Dim Level 11." />
				<enumChoice choice="Dim Level 12." />
				<enumChoice choice="Dim Level 13." />
				<enumChoice choice="Dim Level 14." />
				<enumChoice choice="Dim Level 15." />
				<enumChoice choice="Dim Level 16. This is the brightest setting" />
				<enumChoice choice="Mars effect" />
				<enumChoice choice="Beacon effect" />
				<enumChoice choice="Flame effect" />
				<enumChoice choice="Ashpan effect" />
			</enumVal>
		</variable>

		<variable label="Motor Feedback Enable" item="feedback" CV="56"  default="1" comment="0=OFF, 1=ON">
			<enumVal>
				<enumChoice choice="No" />
				<enumChoice choice="Yes" />
			</enumVal>
		</variable>

		<variable label="Feedback Proportional Gain" CV="57" default="140"
				comment="Insert comment">
				<decVal/></variable>

		<variable label="Feedback Integral Gain" CV="58" default="143"
				comment="Insert comment">
				<decVal/></variable>

		<variable label="ZTC Real Slow Mode Enable" CV="60" default="0"
				comment="Enables ZTCs own slow running mode">
			<enumVal>
				<enumChoice choice="No" />
				<enumChoice choice="Yes" />
			</enumVal>
		</variable>

		<variable label="ZTC Real Slow Mode Tuning" CV="61"
				comment="allows fine tuning of the speed range">
				<decVal max="20" /></variable>

			
		<variable label="Kick Start" CV="65">			<decVal/></variable>

		<variable label="Forward Trim" CV="66">			<decVal/></variable>

		<variable label="Speed Table" CV="67">
			<speedTableVal/></variable>

		<variable label="Reverse Trim" CV="95">			<decVal/></variable>

		<variable label="User Id #1" CV="105">			<decVal/></variable>
		<variable label="User Id #2" CV="106">			<decVal/></variable>

	</variables>
</decoder>

<pane name="Decoder RESET">
    	<column> <row> <column>
			<label label=" " />
			<display item="resetbit" />
			<label label=" " />
			
	</column> </row> </column>
</pane>

<pane name="ZTC">
    <column><row><column>
			<display item="feedback" />
			<label label=" " />
			
			<display item="Feedback Proportional Gain" format="hslider" label=" "/>
			<display item="Feedback Proportional Gain"/>

			<display item="Feedback Integral Gain" format="hslider" label=" "/>
			<display item="Feedback Integral Gain"/>

			<separator/>

			<label label=" " />
			<display item="ZTC Real Slow Mode Enable" label="ZTC Real Slow Mode Enable"/>

			<label label=" " />

			<display item="ZTC Real Slow Mode Tuning" format="hslider" label=" " 
				tooltip="Adjust Top Speed Resolution. 0=Fastest: 20=Slowest" />
			<display item="ZTC Real Slow Mode Tuning"	tooltip="Adjust Top Speed Resolution. 0=Fastest: 20=Slowest" />

			<label label=" " />

			<separator/>

			<label label=" " />
			<display item="Decoder Automatic Stopping Configuration" />

			<label label=" " />
			<display item="Auto Stopping Distance" format="hslider" label=""/>
			<display item="Auto Stopping Distance"/>

			<label label=" " />
			<separator/>

			<label label=" " />

			<display item="ZTC Talkback" />
			<label label=" " />
			<display item="talkbackconfig" />
			<label label=" " />

			<separator/>
			<separator/>
			<label label=" " />
			<display item="alt function" tooltip="Sets which functions operate in DC mode: 3=Directional lights" />
			<label label=" " />
			<display item="Analog" tooltip="Read Only CV: 1=Yes" />
			
		</column></row></column>
</pane>
	
</decoder-config>

