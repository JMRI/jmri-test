<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="../XSLT/decoder.xsl"?>
<!DOCTYPE decoder-config SYSTEM "../DTD/decoder-config.dtd">
<!-- Copyright (C) JMRI 2003, 2005, 2007 All rights reserved -->
<!-- See the COPYING file for more information on licensing and appropriate use -->
<!-- $Id: Digitrax_Basic.xml,v 1.15 2007-08-26 15:50:32 jacobsen Exp $ -->
<decoder-config>
		<version author="phil.grainger@ca.com" 
					version="9" lastUpdated="20050112"/>

		<!-- Version 3 - rename family, add decoders, fix bug with FX on output 1 -->
		<!-- version 4 - add DH140, DN140, update DN146 ID -->
		<!-- version 5 - update versionID range -->
		<!-- version 6 - add consist direction - jake -->
		<!-- Version 7 - fix "rule 17" typos -->
      <!-- Version 7.1 - changed spelling of "behavior" (Jack Shall) -->
            <!-- Version 8 - Added fifth function, also added DH83FX) Phil G -->
      <!-- Version 9 - fixed mask for "Vstart/Vmid/Vfull in 128 step mode" - Bob Jacobsen -->
      <!-- Version 10 - fixed labels for Enable/Disable "Vstart/Vmid/Vfull in 128 step mode" - Paul Bender -->

<decoder>
	<family name="Basic FX" mfg="Digitrax" lowVersionID="91" highVersionID="111">
		<model model="DH083" numOuts="5" numFns="3"/>
		<model model="DH83FX" numOuts="5" numFns="3"/>
		<model model="DH84FX" numOuts="5" numFns="6"/>
		<model model="DH140" numOuts="4" numFns="2"/>
		<model model="DH150" numOuts="5" numFns="3"/>
		<model model="DH380" numOuts="8" numFns="12"/>
		<model model="DH580" numOuts="8" numFns="12"/>
		<model model="DG380" numOuts="8" numFns="12" lowVersionID="63" highVersionID="63"/>
		<model model="DG580" numOuts="8" numFns="12"/>
		<model model="DN93FX" numOuts="4" numFns="6"/>
		<model model="DN140" numOuts="4" numFns="2"/>
		<model model="DN144" numOuts="4" numFns="3"/>
		<model model="DN145" numOuts="4" numFns="3"/>
		<model model="DN146" numOuts="4" numFns="3"/>
		<model model="DN147" numOuts="4" numFns="3"/>
		<model model="DN148" numOuts="4" numFns="3"/>
	</family>

	<programming direct="byteOnly" paged="yes" 
	                     register="yes" ops="yes"></programming>

	<variables>
		<variable label="Primary Address" CV="1" comment="Short address"
						item="Short Address"  default="03">
			<shortAddressVal/></variable>
		<variable label="Start Volts" CV="2" item="Vstart"
						comment="A value of 255 corresponds to 100%">
			<decVal></decVal>
			</variable>
		<variable label="Acceleration Rate" CV="3" item="Accel">
			<decVal max="31"/>
			</variable>
		<variable label="Deceleration Rate" CV="4" item="Decel">
			<decVal max="31"/>
			</variable>
		<variable label="Max Volts" CV="5" item="Vhigh">
			<decVal/>
			</variable>
		<variable label="Mid Volts" CV="6" item="Vmid">
			<decVal/>
			</variable>
		<variable label="Version ID" CV="7" readOnly="yes" item="Decoder Version">
				<decVal/>
			</variable>
		<variable label="Manufacturer" CV="8" readOnly="yes">
				<decVal/>
			</variable>
		<variable label="F1 during DC operation" CV="13" mask="XXXXXXXV"
						 minFn="1" item="Analog Mode Function Status - F1">
			<enumVal>
				<enumChoice choice="Off"/>
				<enumChoice choice="On"/>
				</enumVal>
			</variable>
		<variable label="F2 during DC operation" CV="13" mask="XXXXXXVX"
						 minFn="2" item="Analog Mode Function Status - F2">
			<enumVal>
				<enumChoice choice="Off"/>
				<enumChoice choice="On"/>
				</enumVal>
			</variable>
		<variable label="F3 during DC operation" CV="13" mask="XXXXXVXX"
						 minFn="3" item="Analog Mode Function Status - F3">
			<enumVal>
				<enumChoice choice="Off"/>
				<enumChoice choice="On"/>
				</enumVal>
			</variable>
		<variable label="F4 during DC operation" CV="13" mask="XXXXVXXX"
						 minFn="4" item="Analog Mode Function Status - F4">
			<enumVal>
				<enumChoice choice="Off"/>
				<enumChoice choice="On"/>
				</enumVal>
			</variable>
		<variable label="F5 during DC operation" CV="13" mask="XXXVXXXX"
						 minFn="5" item="Analog Mode Function Status - F5">
			<enumVal>
				<enumChoice choice="Off"/>
				<enumChoice choice="On"/>
				</enumVal>
			</variable>
		<variable label="F6 during DC operation" CV="13" mask="XXVXXXXX"
						 minFn="6" item="Analog Mode Function Status - F6">
			<enumVal>
				<enumChoice choice="Off"/>
				<enumChoice choice="On"/>
				</enumVal>
			</variable>
		<variable label="F0 Forward during DC operation" CV="13" mask="XVXXXXXX"
						item="Analog Mode Function Status - FL(f)">
			<enumVal>
				<enumChoice choice="Off"/>
				<enumChoice choice="On"/>
				</enumVal>
			</variable>
		<variable label="F0 Reverse during DC operation" CV="13" mask="VXXXXXXX"
						item="Analog Mode Function Status - FL(r)">
			<enumVal>
				<enumChoice choice="Off"/>
				<enumChoice choice="On"/>
				</enumVal>
			</variable>
		<variable label="Long Address" CV="17" item="Extended Address">
			<longAddressVal/>
			</variable>

		<variable label="Consist Address" CV="19" mask="XVVVVVVV" item="Consist Address">
			<decVal/></variable>
		
		<variable label="Consist Direction" CV="19" mask="VXXXXXXX">
			<enumVal>
				<enumChoice choice="Normal"></enumChoice>
				<enumChoice choice="Reversed"></enumChoice>
				</enumVal></variable>

		<variable label="Normal direction of motion" CV="29" mask="XXXXXXXV" item="Locomotive Direction">
			<enumVal>
				<enumChoice choice="forward"/>
				<enumChoice choice="reverse"/>
				</enumVal>
			</variable>
		<variable label="Speed steps" CV="29" mask="XXXXXXVX"
					item="Speed Step Mode">
			<enumVal>
				<enumChoice choice="14"/>
				<enumChoice choice="28/128"/>
				</enumVal>
			</variable>
		<variable label="Analog conversion mode" CV="29" mask="XXXXXVXX" item="Analog (DC) Operation">
			<enumVal>
				<enumChoice choice="Off"/>
				<enumChoice choice="On"/>
				</enumVal>
			</variable>
		<variable label="Use Speed Table" CV="29" mask="XXXVXXXX"
					item="Speed Table Definition">
			<enumVal>
				<enumChoice choice="Use Vstart, Vmid, Vhigh"/>
				<enumChoice choice="Use Table"/>
				</enumVal>
			</variable>
		<variable label="Addressing Mode" CV="29" mask="XXVXXXXX"
					item="Address Format">
			<enumVal>
				<enumChoice choice="2 digit addressing"/>
				<enumChoice choice="4 digit addressing"/>
				</enumVal>
			</variable>
		<variable label="Function F0F effect generated" CV="49" mask="XXXXVVVV">
			<enumVal>
				<enumChoice choice="Normal function of lead"/>
				<enumChoice choice="Random flicker"/>
				<enumChoice choice="Mars light"/>
				<enumChoice choice="Flashing head light"/>
				<enumChoice choice="Single pulse strobe"/>
				<enumChoice choice="Double pulse strobe"/>
				<enumChoice choice="Rotary beacon simulation"/>
				<enumChoice choice="Gyralite"/>
				<enumChoice choice="Rule 17 dimmable headlight"/>
				<enumChoice choice="FRED end of train light"/>
				<enumChoice choice="Right ditch light; when F2 on, flashes alternately"/>
				<enumChoice choice="Left ditch light; when F2 on, flashes alternately"/>
				<enumChoice choice="Reserved (0x0C)"/>
				<enumChoice choice="Reserved (0x0D)"/>
				<enumChoice choice="Reserved (0x0E)"/>
				<enumChoice choice="Reserved (0x0F)"/>
				</enumVal>
			</variable>
		<variable label="Function F0F behavior" CV="49" mask="VVVVXXXX">
			<enumVal>
				<enumChoice choice="Forward direction, ON with function ON, phase A"/>
				<enumChoice choice="Reverse direction, ON with function ON, phase B"/>
				<enumChoice choice="Non directional, ON with function ON, effect phase A"/>
				<enumChoice choice="Non directional, ON with function ON, effect phase B"/>
				<enumChoice choice="Forward direction, ON with F0 on &amp; function ON, phase A"/>
				<enumChoice choice="Reverse direction, ON with F0 on &amp; function ON, phase B"/>
				<enumChoice choice="Special logic for Fwd Ditch Light or Rule 17 dimming"/>
				<enumChoice choice="Special logic for Rev Ditch Light or Rule 17 dimming"/>
				<enumChoice choice="Reserved (0x8)"/>
				<enumChoice choice="Reserved (0x9)"/>
				<enumChoice choice="Reserved (0xA)"/>
				<enumChoice choice="Reserved (0xB)"/>
				<enumChoice choice="Reserved (0xC)"/>
				<enumChoice choice="Reserved (0xD)"/>
				<enumChoice choice="Reserved (0xE)"/>
				<enumChoice choice="Reserved (0xF)"/>
				</enumVal>
			</variable>
		<variable label="Function F0R effect generated" CV="50" mask="XXXXVVVV">
			<enumVal>
				<enumChoice choice="Normal function of lead"/>
				<enumChoice choice="Random flicker"/>
				<enumChoice choice="Mars light"/>
				<enumChoice choice="Flashing head light"/>
				<enumChoice choice="Single pulse strobe"/>
				<enumChoice choice="Double pulse strobe"/>
				<enumChoice choice="Rotary beacon simulation"/>
				<enumChoice choice="Gyralite"/>
				<enumChoice choice="Rule 17 dimmable headlight"/>
				<enumChoice choice="FRED end of train light"/>
				<enumChoice choice="Right ditch light; when F2 on, flashes alternately"/>
				<enumChoice choice="Left ditch light; when F2 on, flashes alternately"/>
				<enumChoice choice="Reserved (0x0C)"/>
				<enumChoice choice="Reserved (0x0D)"/>
				<enumChoice choice="Reserved (0x0E)"/>
				<enumChoice choice="Reserved (0x0F)"/>
				</enumVal>
			</variable>
		<variable label="Function F0R behavior" CV="50" mask="VVVVXXXX">
			<enumVal>
				<enumChoice choice="Forward direction, ON with function ON, phase A"/>
				<enumChoice choice="Reverse direction, ON with function ON, phase B"/>
				<enumChoice choice="Non directional, ON with function ON, effect phase A"/>
				<enumChoice choice="Non directional, ON with function ON, effect phase B"/>
				<enumChoice choice="Forward direction, ON with F0 on &amp; function ON, phase A"/>
				<enumChoice choice="Reverse direction, ON with F0 on &amp; function ON, phase B"/>
				<enumChoice choice="Special logic for Fwd Ditch Light or Rule 17 dimming"/>
				<enumChoice choice="Special logic for Rev Ditch Light or Rule 17 dimming"/>
				<enumChoice choice="Reserved (0x8)"/>
				<enumChoice choice="Reserved (0x9)"/>
				<enumChoice choice="Reserved (0xA)"/>
				<enumChoice choice="Reserved (0xB)"/>
				<enumChoice choice="Reserved (0xC)"/>
				<enumChoice choice="Reserved (0xD)"/>
				<enumChoice choice="Reserved (0xE)"/>
				<enumChoice choice="Reserved (0xF)"/>
				</enumVal>
			</variable>
		<variable label="Function 1 effect generated" CV="51" mask="XXXXVVVV">
			<enumVal>
				<enumChoice choice="Normal function of lead"/>
				<enumChoice choice="Random flicker"/>
				<enumChoice choice="Mars light"/>
				<enumChoice choice="Flashing head light"/>
				<enumChoice choice="Single pulse strobe"/>
				<enumChoice choice="Double pulse strobe"/>
				<enumChoice choice="Rotary beacon simulation"/>
				<enumChoice choice="Gyralite"/>
				<enumChoice choice="Rule 17 dimmable headlight"/>
				<enumChoice choice="FRED end of train light"/>
				<enumChoice choice="Right ditch light; when F2 on, flashes alternately"/>
				<enumChoice choice="Left ditch light; when F2 on, flashes alternately"/>
				<enumChoice choice="Reserved (0x0C)"/>
				<enumChoice choice="Reserved (0x0D)"/>
				<enumChoice choice="Reserved (0x0E)"/>
				<enumChoice choice="Reserved (0x0F)"/>
				</enumVal>
			</variable>
		<variable label="Function 1 behavior" CV="51" mask="VVVVXXXX">
			<enumVal>
				<enumChoice choice="Forward direction, ON with function ON, phase A"/>
				<enumChoice choice="Reverse direction, ON with function ON, phase B"/>
				<enumChoice choice="Non directional, ON with function ON, effect phase A"/>
				<enumChoice choice="Non directional, ON with function ON, effect phase B"/>
				<enumChoice choice="Forward direction, ON with F0 on &amp; function ON, phase A"/>
				<enumChoice choice="Reverse direction, ON with F0 on &amp; function ON, phase B"/>
				<enumChoice choice="Special logic for Fwd Ditch Light or Rule 17 dimming"/>
				<enumChoice choice="Special logic for Rev Ditch Light or Rule 17 dimming"/>
				<enumChoice choice="Reserved (0x8)"/>
				<enumChoice choice="Reserved (0x9)"/>
				<enumChoice choice="Reserved (0xA)"/>
				<enumChoice choice="Reserved (0xB)"/>
				<enumChoice choice="Reserved (0xC)"/>
				<enumChoice choice="Reserved (0xD)"/>
				<enumChoice choice="Reserved (0xE)"/>
				<enumChoice choice="Reserved (0xF)"/>
				</enumVal>
			</variable>
		<variable label="Function 2 effect generated" CV="52" mask="XXXXVVVV">
			<enumVal>
				<enumChoice choice="Normal function of lead"/>
				<enumChoice choice="Random flicker"/>
				<enumChoice choice="Mars light"/>
				<enumChoice choice="Flashing head light"/>
				<enumChoice choice="Single pulse strobe"/>
				<enumChoice choice="Double pulse strobe"/>
				<enumChoice choice="Rotary beacon simulation"/>
				<enumChoice choice="Gyralite"/>
				<enumChoice choice="Rule 17 dimmable headlight"/>
				<enumChoice choice="FRED end of train light"/>
				<enumChoice choice="Right ditch light; when F2 on, flashes alternately"/>
				<enumChoice choice="Left ditch light; when F2 on, flashes alternately"/>
				<enumChoice choice="Reserved (0x0C)"/>
				<enumChoice choice="Reserved (0x0D)"/>
				<enumChoice choice="Reserved (0x0E)"/>
				<enumChoice choice="Reserved (0x0F)"/>
				</enumVal>
			</variable>
		<variable label="Function 2 behavior" CV="52" mask="VVVVXXXX">
			<enumVal>
				<enumChoice choice="Forward direction, ON with function ON, phase A"/>
				<enumChoice choice="Reverse direction, ON with function ON, phase B"/>
				<enumChoice choice="Non directional, ON with function ON, effect phase A"/>
				<enumChoice choice="Non directional, ON with function ON, effect phase B"/>
				<enumChoice choice="Forward direction, ON with F0 on &amp; function ON, phase A"/>
				<enumChoice choice="Reverse direction, ON with F0 on &amp; function ON, phase B"/>
				<enumChoice choice="Special logic for Fwd Ditch Light or Rule 17 dimming"/>
				<enumChoice choice="Special logic for Rev Ditch Light or Rule 17 dimming"/>
				<enumChoice choice="Reserved (0x8)"/>
				<enumChoice choice="Reserved (0x9)"/>
				<enumChoice choice="Reserved (0xA)"/>
				<enumChoice choice="Reserved (0xB)"/>
				<enumChoice choice="Reserved (0xC)"/>
				<enumChoice choice="Reserved (0xD)"/>
				<enumChoice choice="Reserved (0xE)"/>
				<enumChoice choice="Reserved (0xF)"/>
				</enumVal>
			</variable>
<variable label="Function 3 effect generated" CV="53" mask="XXXXVVVV">
			<enumVal>
				<enumChoice choice="Normal function of lead"/>
				<enumChoice choice="Random flicker"/>
				<enumChoice choice="Mars light"/>
				<enumChoice choice="Flashing head light"/>
				<enumChoice choice="Single pulse strobe"/>
				<enumChoice choice="Double pulse strobe"/>
				<enumChoice choice="Rotary beacon simulation"/>
				<enumChoice choice="Gyralite"/>
				<enumChoice choice="Rule 17 dimmable headlight"/>
				<enumChoice choice="FRED end of train light"/>
				<enumChoice choice="Right ditch light; when F2 on, flashes alternately"/>
				<enumChoice choice="Left ditch light; when F2 on, flashes alternately"/>
				<enumChoice choice="Reserved (0x0C)"/>
				<enumChoice choice="Reserved (0x0D)"/>
				<enumChoice choice="Reserved (0x0E)"/>
				<enumChoice choice="Reserved (0x0F)"/>
				</enumVal>
			</variable>
		<variable label="Function 3 behavior" CV="53" mask="VVVVXXXX">
			<enumVal>
				<enumChoice choice="Forward direction, ON with function ON, phase A"/>
				<enumChoice choice="Reverse direction, ON with function ON, phase B"/>
				<enumChoice choice="Non directional, ON with function ON, effect phase A"/>
				<enumChoice choice="Non directional, ON with function ON, effect phase B"/>
				<enumChoice choice="Forward direction, ON with F0 on &amp; function ON, phase A"/>
				<enumChoice choice="Reverse direction, ON with F0 on &amp; function ON, phase B"/>
				<enumChoice choice="Special logic for Fwd Ditch Light or Rule 17 dimming"/>
				<enumChoice choice="Special logic for Rev Ditch Light or Rule 17 dimming"/>
				<enumChoice choice="Reserved (0x8)"/>
				<enumChoice choice="Reserved (0x9)"/>
				<enumChoice choice="Reserved (0xA)"/>
				<enumChoice choice="Reserved (0xB)"/>
				<enumChoice choice="Reserved (0xC)"/>
				<enumChoice choice="Reserved (0xD)"/>
				<enumChoice choice="Reserved (0xE)"/>
				<enumChoice choice="Reserved (0xF)"/>
				</enumVal>
			</variable>

		<variable label="Directional Headlights" CV="61" mask="XXXXXXXV">
			<enumVal>
				<enumChoice choice="Normal headlight operation"/>
				<enumChoice choice="Reverse light lead controlled by F4"/>
				</enumVal>
			</variable>
		<variable label="Vstart/Vmid/Vfull in 128 step mode" CV="61" mask="XXVXXXXX">
			<enumVal>
				<enumChoice choice="Enabled"/>
				<enumChoice choice="Disabled"/>
				</enumVal>
			</variable>
		<variable label="Short-circuit protection" CV="61" mask="XVXXXXXX"
				comment="Undocumented feature, occasionally requested by Digitrax tech support">
			<enumVal>
				<enumChoice choice="Enabled"/>
				<enumChoice choice="Disabled"/>
				</enumVal>
			</variable>
		<variable label="Lamp keep-alive voltage" CV="62" mask="VVVVXXXX"
				item="Global lighting option 1"
				comment="0 is no keep-alive, use with LEDs">
				<decVal max="15"/>
			</variable>
		<variable label="FX rate adjust" CV="62" mask="XXXXVVVV"
				item="Global lighting option 2"
				comment="0 is fast, 15 is slow, 4 is recommended for start">
				<decVal max="15"/>
			</variable>
		<variable label="Ditch light hold-over time" CV="63"
				item="Global lighting option 3"
				comment="0 is none, 40 is realistic 5 seconds, 255 is about 20 seconds">
				<decVal/>
			</variable>
		<variable label="Kick Start" CV="65">
			<decVal/>
			</variable>
		<variable label="Forward Trim" CV="66">
			<decVal/>
			</variable>
		<variable label="Reverse Trim" CV="95">
			<decVal/>
			</variable>
		<variable label="User Private ID #1" CV="105"
					item="User Id #1">
			<decVal/>
			</variable>
		<variable label="User Private ID #2" CV="106"
					item="User Id #2">
			<decVal/>
			</variable>
		<variable label="Speed Table" CV="67">
			<speedTableVal/>
			</variable>

	<!-- Define the fixed Function-Output mapping -->
	<constant label="FL(f) controls output 1" minOut="1" default="1" /> 
	<constant label="FL(r) controls output 2" minOut="2" default="1" /> 
	<constant label="F1 controls output 3" minOut="3" minFn="1" default="1" /> 
	<constant label="F2 controls output 4" minOut="4" minFn="2" default="1" /> 
	<constant label="F3 controls output 5" minOut="5" minFn="3" default="1" /> 
	<constant label="F4 controls output 6" minOut="6" minFn="4" default="1" /> 
	<constant label="F5 controls output 7" minOut="7" minFn="5" default="1" /> 
	<constant label="F6 controls output 8" minOut="8" minFn="6" default="1" /> 
	<constant label="F7 controls output 9" minOut="9" minFn="7" default="1" /> 
	<constant label="F8 controls output 10" minOut="10" minFn="8" default="1" /> 

	</variables>
	
</decoder>

<pane name="Digitrax">
	<column>
		<display item="Vstart/Vmid/Vfull in 128 step mode" />
		<display item="Short-circuit protection" />
	</column>
</pane>

</decoder-config>

