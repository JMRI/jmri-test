<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="Bob Jacobsen, LBL">
   <meta name="GENERATOR" content="Mozilla/4.75C-CCK-MCD {C-UDP; EBM-APPLE} (Macintosh; U; PPC) [Netscape]">
   <meta name="Content-Type" content="text/html; charset=iso-8859-1">
   <title>JMRI demo README</title>
</head>
<body>

<P>
This is the README file for version 0.9b8 of "JMRIdemo".  

<P><B>Note that
there have been some changes in the Windows packaging since the
earlier version; if you're using the JMRI demo on Windows you should
read the Windows sections again.</B>

<P>
DecoderPro provides a simple yet powerful tool for programming
DCC decoders and managing a locomotive roster.
It works with Digitrax LocoNet and NCE-equipped layouts. It provides
tools for layout control and monitoring, and for programming decoders.
<P>
<B>This is an early release. It is not yet ready for 
serious use. It is being provided so that people can 
get an early look and make comments.</B>

<P>
For more information, visit the 
JMRI web page at 
<A HREF="http://jmri.sourceforge.net/">http://jmri.sourceforge.net/</a>
or contact Bob Jacobsen 
(<A HREF="mailto:jake@physics.berkeley.edu">jake@physics.berkeley.edu</a>). 

<P>
Note that there are three distributions for the JMRI demo.
The basic Java code is the same, only the form of the
distribution varies. 
More information on the details of the various packages is 
available at 
<a href="http://jmri.sourceforge.net/Technical/Packaging.html">http://jmri.sourceforge.net/Technical/Packaging.html</a>.
For more installation information, please 
see 
<A HREF="http://jmri.sourceforge.net/InstallJmri.html">http://jmri.sourceforge.net/InstallJmri.html</a>
<P>
The specific download files are:
<DL>
<DT>Macintosh, in HQX format<DD>
<A HREF="http://prdownloads.sourceforge.net/jmri/JMRIdemo.0.9b8.hqx">http://prdownloads.sourceforge.net/jmri/JMRIdemo.0.9b8.hqx</A>

<DT>Windows and OS/2 in .zip format<DD>
<A HREF="http://prdownloads.sourceforge.net/jmri/JMRIdemo.0.9b8.zip">http://prdownloads.sourceforge.net/jmri/JMRIdemo.0.9b8.zip</A>

<DT>Linux in compressed archive form (.tar.gz)<DD>
<A HREF="http://prdownloads.sourceforge.net/jmri/JMRIdemo.0.9b8.tar.gz">http://prdownloads.sourceforge.net/jmri/JMRIdemo.0.9b8.tar.gz</A>

</dL>

<h3>Macintosh MacOS 8 and 9 instructions:</h3>

The Macintosh version of the JMRI demo can be downloaded from 
<A HREF="http://prdownloads.sourceforge.net/jmri/JMRIdemo.0.9b8.hqx">http://prdownloads.sourceforge.net/jmri/JMRIdemo.0.9b8.hqx</A> .
<P>
We test on a 90MHz Power Macintosh 7100 with 32MB of memory.  This is about
the minimum needed; it works, but is quite slow. Both a faster CPU and more
memory are recommended. 
A screen size of 800x600 or larger is strongly recommended.
<P>
This application should run with any recent release of the Macintosh Runtime for Java (MRJ).  
MRJ requires Mac OS 8.1 or later.  Development is currently using MRJ 2.2.5, 
available for download from Apple at
  <a href="http://developer.apple.com/java/download.html">http://developer.apple.com/java/download.html</a>.
<P>
You need to have the Java Swing and Java communications libraries installed.
An installer can be downloaded from
  <a href="http://prdownloads.sourceforge.net/jmri/JavaLibsInstaller-2.hqx">http://prdownloads.sourceforge.net/jmri/JavaLibsInstaller-2.hqx</a>.
Unfortunately, its a 4MB download.  You only have to do it once, however; 
future updates of JMRI programs will continue to use these same libraries.
Run the installer before starting the JMRI demo program.
<P>
Once those packages are installed, you can
start the program by double-clicking on the "JmriDemo Classic" application icon.  


<h3>Macintosh MacOS X instructions:</h3>

The Macintosh OS X version of the JMRI demo can be downloaded from 
<A HREF="http://prdownloads.sourceforge.net/jmri/JMRIdemo.0.9b8.hqx">http://prdownloads.sourceforge.net/jmri/JMRIdemo.0.9b8.hqx</A> .

<P>
MacOS X version 10.1.1 or later is required.

<P>
You will need drivers for the serial hardware you're using.  We test
using a Keyspan PDA Adapter; those drivers are available at 
  <a href="http://www.keyspan.com/support/macosx">http://www.keyspan.com/support/macosx</a>

<P>  
You also need the javax.comm package.  An installer can be downloaded from
<a href="http://prdownloads.sourceforge.net/jmri/JavaCommInstaller04.hqx">http://prdownloads.sourceforge.net/jmri/JavaCommInstaller04.hqx</a>.
You will need the MacOS X administrator password to run it.

<P>  
Some device drivers will list each port under several names, e.g. starting
with "/dev/tty" or "/dev/cu", for example "/dev/tty.KeyUSA19181.1". In that case, 
you <b>must</b>
select the one that starts with "cu", e.g. "/dev/cu.KeyUSA19181.1". 

<P><b>Don't</b> select the one with no "/dev" prefix, e.g. "KeyUSA19181.1"
If you do select that one, the program won't be able to communicate
until you change the selection. This appears to
be due to a bug in the Keyspan drivers.

<P>
Double-click the "JmriDemo X" icon
to run the application natively under MacOS X. 
By default, it will have the nice Aqua interface.  

<P>
Note that MacOS X 10.1.1 is required for this to work. Further, MacOS X does
not yet support the LocoNet baud rate, so you must use a LocoBuffer to
access a LocoNet; a MS100 will not yet work.  We're working 
to get this fixed, but don't expect it to happen soon.
The NCE direct connection
does work fine. 

<h3>OS/2 instructions:</h3>

You need to have Java (at least 1.1.8), Swing and javacomm installed on your 
machine. These can be downloaded from the IBM site.
<P>
A screen size of 800x600 or larger is strongly recommended.
<P>
Download the 
<A HREF="http://prdownloads.sourceforge.net/jmri/JMRIdemo.0.9b8.zip">http://prdownloads.sourceforge.net/jmri/JMRIdemo.0.9b8.zip</A>
file and expand it with 
<pre>
   PKZIP -extr -dir JMRIdemo.0.9b8.zip
</pre>
Change to the directory just created, then run the JmriDemo.CMD  
script from this directory with
<Pre>
   JmriDemo
</pre>   

<h3>Linux instructions:</h3>

You need to have Java 1.2 or later installed on your machine, including Swing. 
You can get this from Sun at
  <a href="http://java.sun.com/j2se/">http://java.sun.com/j2se/</a>.
For information on installing Java, please see 
  <a href="http://jmri.sourceforge.net/Java/InstallJava.html">http://jmri.sourceforge.net/Java/InstallJava.html</a>.
<P>
To communicate with a LocoNet, you need to have a version of the javax.comm 
package installed on your computer.  One is available at 
  <a href="http://www.interstice.com/kevinh/linuxcomm.html">http://www.interstice.com/kevinh/linuxcomm.html</a>
with additional information at
  <a href="http://www.rxtx.org/">http://www.rxtx.org/</a>.  
 <P>
Download the 
<A HREF="http://prdownloads.sourceforge.net/jmri/JMRIdemo.0.9b8.tar.gz">http://prdownloads.sourceforge.net/jmri/JMRIdemo.0.9b8.tar.gz</A>
file, then unpack it with
<PRE>
   gunzip JMRIdemo.0.9b8.tar.gz
   tar xf JMRIdemo.0.9b8.tar
</PRE>      
Switch to the demo directory and run the demo using

<Pre>
  ./JmriDemo.csh
</pre>
  
<P>
We really need better Linux instructions, esp. the part about the javax.comm
package. It would be great if you were interested in helping with this.

<h3>Windows instructions:</h3>

To run the JMRI demo under Windows, we recommend you have at least 40MB of 
memory for Windows 95 or 98, and 48MB of memory for Windows 2000 or later.
More memory would be good, particularly if you want to use a lot of tools
at once.
We don't know whether the JMRI demo will work on Windows NT, and would appreciate
any information on this that you might have.  For the more complicated 
programmer screens, a display with a resolution of 800x600 or larger is
strongly recommended.
<P>
You need to have Java 1.3.1 or later installed on your machine, including Swing. 
We test with JRE 1.3.1-01 and recommend you 
use it or a later 1.3.1 version. You can get this from Sun at
  <a href="http://java.sun.com/j2se/1.3/jre/">http://java.sun.com/j2se/1.3/jre/</a>.
You'll need about 40MB of available disk space to download and unpack 
the Java installer. 
Java takes up about 20MB once the install is complete.
Other Java versions are available at
  <a href="http://java.sun.com/j2se/">http://java.sun.com/j2se/</a>.
Note that the 1.4 versions are for beta testers, and we're not brave
enough to have done that yet.
For information on installing Java, please see 
  <a href="http://jmri.sourceforge.net/Java/InstallJava.html">http://jmri.sourceforge.net/Java/InstallJava.html</a>
 
<P>
You will need to know where your Java installation is on your disk.  This is
called the "Java home directory" below.  The Sun installers use
<pre>
  C:\Program Files\JavaSoft\JRE\_your_version_
</pre>
for this, for example
<pre>
  C:\Program Files\JavaSoft\JRE\1.3.1
</pre>
<P>
To communicate with a LocoNet or NCE system, you need to have a version 
of the javax.comm package installed on your computer.  The one from 
  <a href="http://java.sun.com/products/javacomm/">http://java.sun.com/products/javacomm/</a>
is included with the JMRI demo distribution, but you have to copy some files
to their final locations.
<P>
Download the 
<A HREF="http://prdownloads.sourceforge.net/jmri/JMRIdemo.0.9b8.win.zip">http://prdownloads.sourceforge.net/jmri/JMRIdemo.0.9b8.zip</A>
file and expand it with WinZip or similar.

<P>
Copy the "win32com.dll" file just unpacked to the "bin" subdirectory of your
Java home directory, for example:
<PRE>
  copy win32com.dll C:\Program Files\JavaSoft\JRE\1.3.1\bin
</PRE>
Copy the "javax.comm.properties" file just unpacked to the "lib" subdirectory 
of your Java home directory, for example:
<PRE>
  copy javax.comm.properties C:\Program Files\JavaSoft\JRE\1.3.1\lib
</PRE>
<P>
Installation is complete.
<P>
To start the program, double click on the "JmriDemo.bat" file icon (depending
on how your machine is configured, this might also show as
"JmriDemo").  If you want to run the program with a debugging
window to see error messages, etc, double click on the
"JmriDemoDebug.bat" icon.
<P>
Note: We've heard that some types of Comm ports can't handle the LocoNet baud
rate.  If you get errors messages about "Unsupported baud rate", please let
us know so we can help find a solution for this.

<h3>LocoNet Hardware Connection:</h3>

There are two hardware adapters available to connect to a LocoNet.  The
LocoBuffer is the strongly preferred alternative, as it reduces the load 
on the host computer and has a significantly smaller error rate.  The
Digitrax MS100 interface adapter is also supported (except on MacOS X). 

<P>
The LocoBuffer was created by John Jabour 
(<a href="mailto:jjabour@optonline.net">jjabour@optonline.net</a>).
More information is also available from the LocoNet_Info group, 
<a href="http://groups.yahoo.com/group/loconet_hackers">http://groups.yahoo.com/group/loconet_hackers</a>
The LocoBuffer should be configured with J1, J4 and J5 set on pins 1 and 2, 
J2 and J3 set to pins 2 and 3. This configures it for a 19200 baud
connection, so select "19,200 baud" when configuring the connection.

<P>
Some computers can successfully communicate at 57600bps with a LocoBuffer.
To do this, select "57,600 baud" when configuring
and configure your LocoBuffer with J4 and J5 set on pins 1 and 2, 
J1, J2 and J3 set to pins 2 and 3 (J1 is the one that determines the baud rate).

<P>The LocoBuffer controller chip should
contain version 1.4.6 or later of the LocoBuffer program. Note that
LocoBuffer version 1.4.5 has a bug that prevents it from working with this program.

<P>Some Windows versions, in particular Win2000, cannot handle the 
LocoBuffer's control leads properly.  You'll see this as 
the program being unable to communicate with the command station, even though
you can see LocoNet traffic with the LocoNet monitor.  To fix this, 
open the preferences and select "no flow control" option,
click save, then quit and restart the program.  Note that this
problem is specific to certain Windows versions, and you generally should
have "hardware flow control" selected.

<P>
A standard Macintosh RS422 serial port will not work directly 
with an MS100. Since it doesn't have two output status lines (DTR and RTS),
it can't provide correct power to the MS100.  It may be possible to 
provide external power; if you're interested in trying this, we'd
be happy to help work out a solution. A LocoBuffer will work fine
with a standard Macintosh RS422 serial port.

<P>
In MS100 mode, the program attempts to open the port at 16600 baud, 
the LocoNet rate.  If this fails, it attempts to open the port at 16457 baud, 
which is a standard rate that's close enough to work.  If this also
fails, the program pops a dialog box to tell you that it can't
set the port to a usable baud rate.  This will always happen on MacOS X, which
is why the MS100 can't be used with MacOS X.  A large fraction, but not all,
Windows machines also have this problem.  We don't know how to tell
which Windows machines will and which won't, except for trying it.  
Because we can't be sure your computer will be able to talk to a 
MS100 without trying it, you should test this before spending money
on the MS100. To do that:
<UL>
<LI>Start the program.
<LI>Set the preferences for MS100 and your serial port. You
don't need to have anything connected, but do select the port
you will eventually be using. 
<LI>Save the preferences.
<LI>Quit the program and restart it so that the preferences take effect.
</UL>If you get a dialog box saying "Could not set baud rate...", then 
you won't be able to use your computer with a MS100.  You should use 
a LocoBuffer.

<P> 
The JMRI demo is tested with both a MS100 and a LocoBuffer on 
a USB Macintosh using a Keyspan PDA 
Adapter to provide the serial port; for information please see 
<a href="http://jmri.sourceforge.net/DigiTrax/KeyspanAdapters/KeyspanUSB.html">http://jmri.sourceforge.net/DigiTrax/KeyspanAdapters/KeyspanUSB.html</a>. 
 
<P>
For more information on the MS100, please see
<a href="http://www.digitrax.com/computer.htm">http://www.digitrax.com/computer.htm</a>

<h3>NCE System Hardware Connection:</H3>

The JMRI demo is tested on a USB Macintosh using a Keyspan PDA Adapter to 
provide the serial port. A standard Macintosh RS422 serial port will also work.

<H3>Starting the JMRI demo:</h3>


After the program starts, pull down the "Edit" menu  and select 
"Preferences...". This will display a pane where you can specify
how to connect to your layout.  First, select the 
hardware connection you're using from "NCE", "LocoNet LocoBuffer", and
"LocoNet MS100".  Next select the name of the serial port connected to your layout.
If you're using a LocoBuffer, select the baud rate and flow control options if needed, 
but the defaults should be fine for most people (see the previous section on LocoNet
hardware connection).
<P>
You can also select a particular GUI appearance using the radio buttons.  "Metal" is the
standard Java form. Depending on where operating system your using, you may have "Windows",
"MacOS" or other selections available.
<P>
 
Click "Save" to save the preferences.  The new preferences don't take effect until
the program is restarted, so at this point you'll be prompted whether you want to
quit. Quit and restart the program.
<P>

<h3>LocoNet operation:</h3>
After configuring and restarting the program, 
you can now pull down the "LocoNet" menu and select "LocoNet Monitor" to open 
a LocoNet monitor frame.  You should immediately start seeing LocoNet traffic 
in the top pane, which contains the last 20 messages. The controls at the bottom 
allow you to display raw data in addition to the interpreted packets, to clear the 
listing, and to write output to a log file.

The "LocoNet" menu has additional tools:

"Send Packet" -  a window what allows you to send an arbitrary packet to the
LocoNet.  Type in hex pairs, such as "b2 11 40 1c", then press 'Send'.

"Slot Monitor" - Displays the contents of the command station slots.  These 
are used by throttles to control locomotives.  If you uncheck the box at the top, 
only slots corresponding to active locomotives will be visible.

If you don't have an MS100 or LocoBuffer connection to a LocoNet layout 
available, you can still see the demo run by selecting "Hexfile" from 
the left "Input" menu.  When you then click "Open file" and and then 
open the lnpacket.hex sample file, the program will pretend that LocoNet 
traffic is arriving from the captured-message file.  


<H3>NCE operation:</h3>

After configuring and restarting the program, 
pull down the "NCE" menu and select "Command Monitor" to open 
a monitor frame.  You won't see any traffic on this until you use one of the
other panels to do something. The controls at the bottom 
allow you to display raw data in addition to the interpreted packets, to clear the 
listing, and to write output to a log file.


<H3>Using the JMRI tools:</H3>

The "Tools" menu contains additional tools for interacting with your layout:
<P>
<dfn>"Turnout Control"</dfn> - a window to control and monitor a single turnout.  You can have as 
many of these open as you'd like.  
<P>
<dfn>"Simple programmer"</dfn> - a window to use the command station's programming track to 
read or write a single CV at a time.  Paged, Direct and Register modes are available, 
but not yet Ops Mode.
<P>
<dfn>"Decoder Pro programmer"</dfn> - a window for programming decoders with a more
friendly interface.  For more information, please see 
<a href="http://jmri.sourceforge.net/DecoderPro">http://jmri.sourceforge.net/DecoderPro</a>.


<P>
The "Development" menu contains tools for watching the programs memory usage, and for
working with the configuration files used for DecoderPro.

<h3>For more information:</H3>

More information is available on the JMRI web page:   
<a href="http://jmri.sourceforge.net/">http://jmri.sourceforge.net/</a>
The Decoder Pro programmer is described on its own page:
<A HREF="http://jmri.sourceforge.net/DecoderPro">http://jmri.sourceforge.net/DecoderPro</A>.
More information on the LocoNet tools is available at 
<A HREF="http://jmri.sourceforge.net/Digitrax/locotools.html">http://jmri.sourceforge.net/Digitrax/locotools.html</A>.
 

<P>
Feedback is greatly appreciated!  We especially welcome suggestions of what 
you'd like to see this program do.  If you encounter a problem, please let use 
know so we can fix it.  You can send email to 
<a href="mailto:jake@physics.berkeley.edu">jake@physics.berkeley.edu</a>, 
or use the web forms to 

<DL>
<DT>Report bugs:    <DD> <a href="http://sourceforge.net/tracker/?atid=388313&amp;group_id=26788&amp;func=add">http://sourceforge.net/tracker/?atid=388313&group_id=26788&func=add</a>

<DT>Request help:   <DD><a href="http://sourceforge.net/tracker/?atid=388314&amp;group_id=26788&amp;func=add">http://sourceforge.net/tracker/?atid=388314&group_id=26788&func=add</a>

<DT>Suggest improvements:   <DD><a href="http://sourceforge.net/tracker/?atid=388316&amp;group_id=26788&amp;func=add">http://sourceforge.net/tracker/?atid=388316&group_id=26788&func=add</a>
</DL>
<P>
The <A href="http://lists.sourceforge.net/lists/listinfo/jmri-announce">jmri-announce</a> 
mailing list carries announcements of new versions, major changes, etc. 
This list is intended to be very low traffic; discussions, etc, should take place elsewhere.
You can subscribe
(or unsubscribe)
using the 
<A HREF="http://lists.sourceforge.net/lists/listinfo/jmri-announce">web interface</A>. <P>

<h3>Notes: </h3>
 
Some hardware may not support the LocoNet baud rate.  If so, please let me know the 
specifics so I can create a workaround. 

<P>
The javax.comm.MRJ package, including the javax.comm.MRJ.jar file, is 
copyright 1999 Patrick Beard, <a href="mailto:beard@netscape.com">beard@netscape.com</a>.  Do not redistribute without 
permission. See <a href="http://homepage.mac.com/pcbeard/javax.comm.MRJ/">http://homepage.mac.com/pcbeard/javax.comm.MRJ/</a> for 
more information.

<P>
The LocoNet monitoring includes algorithms first seen in the llnmon program 
by Ron W. Auld.

<P>
For other important acknowledgements, please see
<a href="http://jmri.sourceforge.net/Acknowledgements.html">http://jmri.sourceforge.net/Acknowledgements.html</a>

<P>
Some of the contents of this folder are copyright 2001 Bob Jacobsen, 
<a href="mailto:jake@physics.berkeley.edu">jake@physics.berkeley.edu</a>. 
DecoderPro and JMRI are open-source projects.
For license information, see
<a href="http://www.opensource.org/licenses/artistic-license.html">http://www.opensource.org/licenses/artistic-license.html</a>.

<P>
LocoNet is a trademark of Digitrax Corp.

<P>
More information on the JMRI project is available from the in-construction 
web pages at 
<a href="http://jmri.sourceforge.net/">http://jmri.sourceforge.net/</a>. 
The source code is available vis CVS 
from that page.

<P>
To comply with the Sun trademark policy, JMRI is not an acronym.

<HR>
<BR>Site hosted by: <BR>
<A href="http://sourceforge.net"> 
<IMG src="http://sourceforge.net/sflogo.php?group_id=26788&type=1" width="88" height="31" border="0" alt="SourceForge Logo"> </A> 

<script language=javascript 
src="http://ss.webring.com/navbar?f=j;y=bob_jacobsen15;u=100088115910095949">
</script><noscript><center>
<table bgcolor=gray cellspacing=0 border=2 bordercolor=red><tr>
<td><table cellpadding=2 cellspacing=0 border=0><tr><td align=center>
<font face=arial size=-1>This site is a member of WebRing. 
<br>To browse visit <a href="http://ss.webring.com/navbar?f=l;y=bob_jacobsen15;u=100088115910095949">
Here</a>.</font></td></tr></table></td></tr></table>
</center></noscript>

<hr>
Bob Jacobsen<BR>
jake@physics.berkeley.edu

</body>
</html>
